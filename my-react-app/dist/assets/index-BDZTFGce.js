import{r as e,j as t}from"./react-CSMq4t3t.js";import{a as s}from"./axios-C-1G2k3o.js";import{u as i,a,b as n,c as o,d as r,R as c}from"./react-router-BLFcAc0W.js";import{A as l,S as d}from"./@vercel-C3lfKUOi.js";import{c as u}from"./react-dom-CyqBZZYC.js";import{P as p,a as h}from"./@paypal-BFitd9Mj.js";import"./cookie-CXUWDbkB.js";import"./scheduler-6ULW7vKx.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const m=({title:t,description:s,keywords:i,image:a,url:n,type:o="website",structuredData:r=null})=>{const c="SQB",l=t?`${t} | ${c}`:c,d="https://medquiz.vercel.app/login-icon.png",u="https://medquiz.vercel.app/";return e.useEffect(()=>{document.title=l;const e=(e,t)=>{let s=document.querySelector(`meta[name="${e}"]`);s||(s=document.createElement("meta"),s.name=e,document.head.appendChild(s)),s.content=t},t=(e,t)=>{let s=document.querySelector(`meta[property="${e}"]`);s||(s=document.createElement("meta"),s.setAttribute("property",e),document.head.appendChild(s)),s.content=t};e("description",s),e("keywords",i||"اختبارات الهيئة السعودية للتخصصات الصحية, تدريب على اختبار الهيأة, اختبار البرومترك, كويزات برومترك, اسئلة الهيئة السعودية للتخصصات الصحية, بنك اسئلة برومترك, تجميعات برومترك, اسئلة اختبار البرومترك, تدريب برومترك, اسئلة طبية سعودية, اختبارات طبية, اختبار الرخصة الطبية السعودية, SMLE, Prometric, Saudi Medical Licensing Examination, medical questions, medical quiz, medical exam preparation, Saudi medical license, medical board exam, medical practice test, medical study guide, Saudi medical students, free trial, Prometric questions, Prometric Saudi, برومترك, اسئلة برومترك, اسئلة اختبار البرومترك, اسئلة الهيئة السعودية للتخصصات الصحية, بنك اسئلة برومترك, بنك اسئلة SMLE, تجميعات برومترك, تجميعات SMLE, اختبار البرومترك, اختبار الهيئة السعودية, اسئلة طبية, بنك اسئلة طبية, تدريب برومترك, تدريب SMLE, اسئلة امتحان برومترك, اسئلة امتحان SMLE, اسئلة طبية سعودية, اسئلة طبية برومترك, Saudi Prometric, Prometric exam, Prometric practice, Prometric medicine, Prometric Saudi Arabia, Saudi Prometric questions, Saudi Prometric bank, Saudi Prometric practice, Saudi Prometric free, Saudi Prometric trial, Saudi Prometric preparation, Saudi Prometric online, Saudi Prometric MCQ, Saudi Prometric test, Saudi Prometric review, Saudi Prometric study, Saudi Prometric guide, Saudi Prometric analytics, Saudi Prometric performance, Saudi Prometric topics, Saudi Prometric mobile, Saudi Prometric affordable, Saudi Prometric subscription, Saudi Prometric unlimited, Saudi Prometric 2024, Saudi Prometric 2025"),e("author",c),e("robots","index, follow");let p=document.querySelector('link[rel="canonical"]');if(p||(p=document.createElement("link"),p.rel="canonical",document.head.appendChild(p)),p.href=n||u,t("og:type",o),t("og:title",l),t("og:description",s),t("og:image",a||d),t("og:url",n||u),t("og:site_name",c),t("og:locale","ar_SA"),t("twitter:card","summary_large_image"),t("twitter:title",l),t("twitter:description",s),t("twitter:image",a||d),t("twitter:url",n||u),r){document.querySelectorAll('script[type="application/ld+json"]').forEach(e=>{e.textContent.includes('"@type":"WebPage"')&&e.remove()});const e=document.createElement("script");e.type="application/ld+json",e.textContent=JSON.stringify(r),document.head.appendChild(e)}return()=>{}},[l,s,i,n,a,o,r]),null},g="http://localhost:3000";function y(){const[t,s]=e.useState("en");return e.useEffect(()=>{const e=navigator.language||navigator.userLanguage;e&&e.startsWith("ar")?s("ar"):s("en")},[]),t}const x=()=>{const a=y(),n="ar"===a,o=i(),[r,c]=e.useState(!1),[l,d]=e.useState(!1),[u,p]=e.useState(""),[h,x]=e.useState(!1),[f,j]=e.useState(!1),[b,w]=e.useState(!1);e.useEffect(()=>{const e=document.documentElement.dir;return document.documentElement.dir=n?"rtl":"ltr",()=>{document.documentElement.dir=e||"ltr"}},[a,n]);return t.jsxs(t.Fragment,{children:[t.jsx(m,{title:n?"منصة برومترك (SMLE) الشاملة":"Ultimate SMLE (Prometric) Prep Platform",description:n?"استعد لاختبار البرومترك السعودي (SMLE) مع مجموعتنا الشاملة التي تضم أكثر من 8000 سؤال دقيق وتحليلات مفصلة وتجربة مجانية.":"Master the Saudi Medical Licensing Examination (SMLE) and Prometric with MEDQIZE. Access over 8,000 carefully curated questions with detailed analytics, targeted practice, and comprehensive performance tracking. Start your free trial today!",keywords:"SMLE, Prometric, Saudi Medical Licensing Examination, medical questions, medical quiz, medical exam preparation, Saudi medical license, medical board exam, medical practice test, medical study guide, Saudi medical students, free trial, Prometric questions, Prometric Saudi, برومترك, اسئلة برومترك, اسئلة اختبار البرومترك, اسئلة الهيئة السعودية للتخصصات الصحية, بنك اسئلة برومترك, بنك اسئلة SMLE, تجميعات برومترك, تجميعات SMLE, اختبار البرومترك, اختبار الهيئة السعودية, اسئلة طبية, بنك اسئلة طبية, تدريب برومترك, تدريب SMLE, اسئلة امتحان برومترك, اسئلة امتحان SMLE, اسئلة طبية سعودية, اسئلة طبية برومترك, Saudi Prometric, Prometric exam, Prometric practice, Prometric medicine, Prometric Saudi Arabia, Saudi Prometric questions, Saudi Prometric bank, Saudi Prometric practice, Saudi Prometric free, Saudi Prometric trial, Saudi Prometric preparation, Saudi Prometric online, Saudi Prometric MCQ, Saudi Prometric test, Saudi Prometric review, Saudi Prometric study, Saudi Prometric guide, Saudi Prometric analytics, Saudi Prometric performance, Saudi Prometric topics, Saudi Prometric mobile, Saudi Prometric affordable, Saudi Prometric subscription, Saudi Prometric unlimited, Saudi Prometric 2024, Saudi Prometric 2025",url:"https://www.smle-question-bank.com",lang:a}),t.jsxs("div",{className:"landing-body",dir:n?"rtl":"ltr",children:[t.jsx("div",{className:"landing-top-wave",dir:"ltr",children:t.jsx("svg",{viewBox:"0 0 2880 180",fill:"none",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:t.jsxs("g",{className:"wave-anim-group",children:[t.jsx("path",{d:"M0,80 C360,180 1080,0 1440,100 L1440,0 L0,0 Z",fill:"#00b6e0",fillOpacity:"0.10"}),t.jsx("path",{d:"M0,80 C360,180 1080,0 1440,100 L1440,0 L0,0 Z",fill:"#00b6e0",fillOpacity:"0.10",transform:"scale(-1,1) translate(-2880,0)"})]})})}),t.jsx("div",{className:"landing-bg-icon",children:"?"}),t.jsxs("div",{className:"landing-wrapper landing-main-container",children:[t.jsx("div",{className:"landing-badge",children:n?"الأفضل سعراً لاختبار البرومترك (SMLE)":"#1 Affordable SMLE (Prometric) Prep"}),t.jsxs("div",{className:"landing-header",children:[t.jsxs("h1",{className:"landing-main-title landing-title-shadow",children:["SQB",n&&t.jsxs(t.Fragment,{children:[t.jsx("br",{}),t.jsx("span",{style:{fontWeight:"normal",fontSize:"22px"},children:"بنك الأسئلة السعودي"})]})]}),t.jsx("h2",{className:"landing-subtitle",children:n?"بنك أسئلة برومترك (SMLE) الشامل الخاص بك":"Your Ultimate SMLE (Prometric) Question Bank"}),t.jsx("p",{className:"landing-description",children:n?"استعد لاختبار البرومترك السعودي (SMLE) مع مجموعتنا الشاملة التي تضم أكثر من 8000 سؤال دقيق":"Master the Saudi Medical Licensing Examination (SMLE) and Prometric with our comprehensive collection of over 8,000 carefully curated questions"})]}),t.jsx("div",{className:"landing-cta",children:t.jsxs("div",{className:"landing-buttons",children:[t.jsx("button",{className:"landing-btn primary",onClick:()=>{c(!0)},children:n?"ابدأ الآن":"Get Started Now"}),t.jsx("button",{className:"landing-btn secondary",onClick:()=>{o("/login")},children:n?"تسجيل الدخول":"Login"})]})}),t.jsx("hr",{className:"section-divider thick"}),t.jsxs("div",{className:"landing-pricing",children:[t.jsx("div",{className:"pricing-badge",children:t.jsx("span",{className:"pricing-label",children:n?"أفضل قيمة":"Best Value"})}),t.jsxs("div",{className:"pricing-card",children:[t.jsxs("div",{className:"pricing-header",children:[t.jsx("h3",{children:n?"🔥 اشتراك سنوي - سنة كاملة ":" ANNUAL SUBSCRIPTION - FULL YEAR "}),t.jsxs("div",{className:"price",children:[t.jsx("span",{className:"currency",children:"SAR"}),t.jsx("span",{className:"amount",children:"50"}),t.jsx("span",{className:"period",children:n?"لمدة سنة كاملة":"FOR 1 FULL YEAR"})]}),t.jsx("p",{className:"pricing-subtitle",children:n?"ليس شهرياً - اشتراك لمدة سنة كاملة":"NOT MONTHLY - SUBSCRIPTION FOR 1 FULL YEAR"})]}),t.jsxs("div",{className:"pricing-features",children:[t.jsxs("div",{className:"pricing-feature",children:[t.jsx("span",{className:"feature-check",children:"✓"}),t.jsx("span",{children:n?"الوصول إلى جميع الأسئلة (8000+)":"Access to all 8,000+ questions"})]}),t.jsxs("div",{className:"pricing-feature",children:[t.jsx("span",{className:"feature-check",children:"✓"}),t.jsx("span",{children:n?"تحليلات أداء مفصلة":"Detailed performance analytics"})]}),t.jsxs("div",{className:"pricing-feature",children:[t.jsx("span",{className:"feature-check",children:"✓"}),t.jsx("span",{children:n?"تدريب حسب الموضوع":"Topic-wise practice sessions"})]}),t.jsxs("div",{className:"pricing-feature",children:[t.jsx("span",{className:"feature-check",children:"✓"}),t.jsx("span",{children:n?"دخول غير محدود 24/7":"24/7 unlimited access"})]}),t.jsxs("div",{className:"pricing-feature",children:[t.jsx("span",{className:"feature-check",children:"✓"}),t.jsx("span",{children:n?"منصة متوافقة مع الجوال":"Mobile-friendly platform"})]})]}),t.jsx("div",{className:"pricing-comparison",children:t.jsx("p",{children:n?"وفر حتى ٨٠٪ مقارنة بالخدمات الأخرى":"Save up to 80% compared to other SMLE (Prometric) services"})}),t.jsx("button",{className:"landing-btn primary",style:{marginTop:24,width:"100%"},onClick:()=>o("/payment"),children:n?"اشترك الآن":"Subscribe / Buy Now"})]})]}),t.jsx("hr",{className:"section-divider"}),t.jsxs("div",{className:"landing-about",children:[t.jsx("h2",{children:n?"من نحن":"About Us"}),t.jsx("div",{className:"about-content",children:t.jsxs("div",{className:"about-text",children:[t.jsx("p",{children:n?"نحن فريق من المتخصصين في المجال الطبي والتقني، ملتزمون بتقديم أفضل منصة تحضير لاختبار البرومترك السعودي (SMLE). هدفنا هو مساعدة الطلاب والأطباء على النجاح في اختباراتهم من خلال بنك أسئلة شامل وتحليلات مفصلة.":"We are a team of medical and technical specialists, committed to providing the best preparation platform for the Saudi Prometric (SMLE) exam. Our goal is to help students and doctors succeed in their exams through a comprehensive question bank and detailed analytics."}),t.jsxs("div",{className:"about-features",children:[t.jsxs("div",{className:"about-feature",children:[t.jsx("span",{className:"feature-icon",children:"🎯"}),t.jsx("span",{children:n?"دقة عالية في الأسئلة":"High Accuracy Questions"})]}),t.jsxs("div",{className:"about-feature",children:[t.jsx("span",{className:"feature-icon",children:"📊"}),t.jsx("span",{children:n?"تحليلات متقدمة":"Advanced Analytics"})]}),t.jsxs("div",{className:"about-feature",children:[t.jsx("span",{className:"feature-icon",children:"💡"}),t.jsx("span",{children:n?"شروحات مفصلة":"Detailed Explanations"})]}),t.jsxs("div",{className:"about-feature",children:[t.jsx("span",{className:"feature-icon",children:"🚀"}),t.jsx("span",{children:n?"تحديثات مستمرة":"Continuous Updates"})]})]})]})})]}),t.jsx("hr",{className:"section-divider"}),t.jsxs("div",{className:"landing-features",children:[t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"📚"}),t.jsx("h3",{children:n?"أكثر من 8000 سؤال":"8,000+ Questions"}),t.jsx("p",{children:n?"بنك أسئلة شامل يغطي جميع مواضيع البرومترك (SMLE) مع شروحات مفصلة":"Extensive question bank covering all SMLE (Prometric) topics with detailed explanations"})]}),t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"📊"}),t.jsx("h3",{children:n?"تحليلات مفصلة":"Detailed Analytics"}),t.jsx("p",{children:n?"تابع تقدمك مع تحليلات شاملة وتقسيم حسب الموضوع":"Track your progress with comprehensive performance analysis and topic-wise breakdown"})]}),t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"🎯"}),t.jsx("h3",{children:n?"تدريب موجه":"Targeted Practice"}),t.jsx("p",{children:n?"ركز على مواضيع محددة أو اختبر معلوماتك بشكل عام":"Focus on specific topics or take mixed quizzes to test your overall knowledge"})]}),t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"📱"}),t.jsx("h3",{children:n?"متوافق مع الجوال":"Mobile Friendly"}),t.jsx("p",{children:n?"ادرس في أي مكان وزمان مع تصميم متجاوب لجميع الأجهزة":"Study anywhere, anytime with our responsive design that works on all devices"})]})]}),t.jsx("div",{className:"add-to-home-trigger",children:t.jsxs("div",{className:"add-to-home-buttons",children:[t.jsxs("button",{className:"landing-btn ios-btn",onClick:()=>{j(!f),w(!1)},children:[t.jsx("img",{src:"https://img.icons8.com/?size=100&id=30659&format=png&color=000000",alt:"iOS",className:"btn-icon"}),n?"تعليمات iOS":"add to home screen - iOS"]}),t.jsxs("button",{className:"landing-btn android-btn",onClick:()=>{w(!b),j(!1)},children:[t.jsx("img",{src:"https://img.icons8.com/?size=100&id=2586&format=png&color=000000",alt:"Android",className:"btn-icon"}),n?"تعليمات Android":"add to home screen - Android"]})]})}),f&&t.jsxs("div",{className:"add-to-home-section important-section",children:[t.jsxs("h2",{children:[t.jsx("img",{src:"https://img.icons8.com/?size=100&id=30659&format=png&color=000000",alt:"iOS",className:"platform-icon"}),n?"كيفية إضافة الموقع إلى الشاشة الرئيسية - iOS":"How to Add to Home Screen - iOS"]}),t.jsx("div",{className:"add-to-home-content",children:t.jsx("div",{className:"add-to-home-instructions",children:t.jsxs("div",{className:"add-to-home-platform ios-platform",children:[t.jsxs("h3",{children:[t.jsx("img",{src:"https://img.icons8.com/?size=100&id=30659&format=png&color=000000",alt:"iOS",className:"step-icon",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"middle"}}),n?"على أجهزة iPhone/iOS:":"On iPhone/iOS:"]}),t.jsx("ol",{children:n?t.jsxs(t.Fragment,{children:[t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"browser",children:"🌐"})," افتح الموقع في متصفح ",t.jsx("b",{children:"Safari"}),"."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"share",children:"🔗"})," اضغط على زر المشاركة (المربع والسهم في الأسفل)."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"add",children:"➕"}),' اختر "إضافة إلى الشاشة الرئيسية".']}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"home",children:"🏠"}),' اضغط "إضافة" وسيظهر الموقع على شاشتك الرئيسية.']})]}):t.jsxs(t.Fragment,{children:[t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"browser",children:"🌐"})," Open the website in ",t.jsx("b",{children:"Safari"})," browser."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"share",children:"🔗"})," Tap the Share button (the square with an arrow at the bottom)."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"add",children:"➕"}),' Select "Add to Home Screen".']}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"home",children:"🏠"}),' Tap "Add" and the site will appear on your home screen.']})]})}),t.jsx("div",{className:"add-to-home-video",children:t.jsx("div",{className:"responsive-video-wrapper",children:t.jsx("video",{src:"/assets/ios-CjUXmhzC.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!1,className:"responsive-video"})})})]})})})]}),b&&t.jsxs("div",{className:"add-to-home-section important-section",children:[t.jsxs("h2",{children:[t.jsx("img",{src:"https://img.icons8.com/?size=100&id=2586&format=png&color=000000",alt:"Android",className:"platform-icon"}),n?"كيفية إضافة الموقع إلى الشاشة الرئيسية - Android":"How to Add to Home Screen - Android"]}),t.jsx("div",{className:"add-to-home-content",children:t.jsx("div",{className:"add-to-home-instructions",children:t.jsxs("div",{className:"add-to-home-platform android-platform",children:[t.jsxs("h3",{children:[t.jsx("img",{src:"https://img.icons8.com/?size=100&id=2586&format=png&color=000000",alt:"Android",className:"step-icon",style:{width:"20px",height:"20px",marginRight:"8px",verticalAlign:"middle"}}),n?"على أجهزة Android:":"On Android:"]}),t.jsx("ol",{children:n?t.jsxs(t.Fragment,{children:[t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"browser",children:"🌐"})," افتح الموقع في متصفح ",t.jsx("b",{children:"Chrome"}),"."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"menu",children:"⋮"})," اضغط على النقاط الثلاث في أعلى يمين الشاشة."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"add",children:"➕"}),' اختر "إضافة إلى الشاشة الرئيسية".']}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"home",children:"🏠"}),' اضغط "إضافة" وسيظهر الموقع على شاشتك الرئيسية.']})]}):t.jsxs(t.Fragment,{children:[t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"browser",children:"🌐"})," Open the website in ",t.jsx("b",{children:"Chrome"})," browser."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"menu",children:"⋮"})," Tap the three dots menu at the top right."]}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"add",children:"➕"}),' Select "Add to Home screen".']}),t.jsxs("li",{children:[t.jsx("span",{className:"step-icon",role:"img","aria-label":"home",children:"🏠"}),' Tap "Add" and the site will appear on your home screen.']})]})}),t.jsx("div",{className:"add-to-home-video",children:t.jsx("div",{className:"responsive-video-wrapper",children:t.jsx("video",{src:"/assets/andriod-DLVmioBU.mp4",autoPlay:!0,loop:!0,muted:!0,playsInline:!0,controls:!1,className:"responsive-video"})})})]})})})]}),t.jsx("hr",{className:"section-divider"}),t.jsxs("div",{className:"landing-stats",children:[t.jsxs("div",{className:"stat-item",children:[t.jsx("div",{className:"stat-number",children:"8,000+"}),t.jsx("div",{className:"stat-label",children:n?"سؤال":"Questions"})]}),t.jsxs("div",{className:"stat-item",children:[t.jsx("div",{className:"stat-number",children:"SAR 50"}),t.jsx("div",{className:"stat-label",children:n?"سنة كاملة":"Full Year"})]}),t.jsxs("div",{className:"stat-item",children:[t.jsx("div",{className:"stat-number",children:"24/7"}),t.jsx("div",{className:"stat-label",children:n?"متاح دائماً":"Available"})]})]}),t.jsx("div",{className:"landing-footer"})]}),r&&t.jsx("div",{className:"landing-modal-overlay",style:{zIndex:1e3},children:t.jsxs("div",{className:"landing-modal-content",children:[t.jsx("h3",{children:n?"اختر طريقة البدء":"Choose how to get started:"}),t.jsxs("div",{className:"trial-options",children:[t.jsxs("div",{className:"trial-option",children:[t.jsxs("h4",{children:[n?"اشتراك كامل":"Full Subscription"," "]}),t.jsx("p",{children:n?"احصل على الوصول الكامل إلى جميع الأسئلة والتحليلات.":"Get full access to all questions and analytics."}),t.jsxs("ul",{children:[t.jsx("li",{children:n?"وصول كامل":"Full access"}),t.jsx("li",{children:n?"حفظ التقدم":"Progress saving"}),t.jsx("li",{children:n?"تحليلات مخصصة":"Personalized analytics"})]}),t.jsx("button",{className:"landing-btn primary",onClick:()=>{c(!1),o("/payment")},style:{marginTop:12},children:n?"اشترك الآن":"Subscribe Now"})]}),t.jsxs("div",{className:"trial-option",children:[t.jsx("h4",{children:n?"تجربة مجانية":"Free Trial"}),t.jsx("p",{children:n?"جرب منصتنا مع 40 سؤالاً مختاراً من جميع المواضيع. لا حاجة للتسجيل!":"Try our platform with 40 carefully selected questions from all 4 topics. No registration required!"}),t.jsxs("ul",{children:[t.jsx("li",{children:n?"٤٠ سؤال تجريبي":"40 sample questions"}),t.jsx("li",{children:n?"جميع أنواع الأسئلة الأربعة":"All 4 question types"}),t.jsx("li",{children:n?"دخول فوري":"Instant access"}),t.jsx("li",{children:n?"بدون تسجيل دخول":"No login needed"})]}),t.jsx("button",{onClick:async()=>{d(!0),setFormError("");try{const e=await s.post(`${g}/free-trial/start`),{trialId:t,user:i}=e.data;c(!1),o("/quizs",{state:{id:t,user:i,isTrial:!0}})}catch(e){setFormError("Failed to start free trial. Please try again.")}finally{d(!1)}},className:"popup-btn",disabled:l,style:{marginTop:12},children:l?n?"...يتم البدء":"Starting...":n?"ابدأ التجربة المجانية":"Start Free Trial"})]})]}),t.jsx("button",{className:"popup-btn no-thanks",onClick:()=>c(!1),style:{marginTop:20},children:n?"إلغاء":"Cancel"})]})})]})]})},f=e.createContext(),j=({children:s})=>{const[i,a]=e.useState(null),[n,o]=e.useState(null);e.useEffect(()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("sessionToken");e&&t&&(a(JSON.parse(e)),o(t))},[]),e.useEffect(()=>{i&&n?(localStorage.setItem("user",JSON.stringify(i)),localStorage.setItem("sessionToken",n)):(localStorage.removeItem("user"),localStorage.removeItem("sessionToken"))},[i,n]);return t.jsx(f.Provider,{value:{user:i,setUser:(e,t)=>{a(e),o(t)},sessionToken:n},children:s})},b=()=>{const{user:s}=e.useContext(f),n=i(),o=a();return t.jsxs("nav",{style:{padding:"0 0 0 0",background:"linear-gradient(90deg, #f8fafc 0%, #e0e7ef 100%)",borderBottom:"2px solid #e0e7ef",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row",zIndex:100},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",height:"64px",paddingLeft:24},children:t.jsx("button",{onClick:()=>{"/quizs"===o.pathname?n("/login"):s&&s.id?n("/quizs",{state:{id:s.id}}):n("/")},style:{fontSize:"16px",padding:"8px 22px",borderRadius:"8px",border:"none",background:"linear-gradient(90deg, #2563eb 0%, #38bdf8 100%)",color:"#fff",fontWeight:600,boxShadow:"0 1px 4px rgba(37,99,235,0.08)",cursor:"pointer",transition:"background 0.2s"},onMouseOver:e=>e.currentTarget.style.background="linear-gradient(90deg, #1d4ed8 0%, #0ea5e9 100%)",onMouseOut:e=>e.currentTarget.style.background="linear-gradient(90deg, #2563eb 0%, #38bdf8 100%)",children:"← Go Back"})}),s&&s.username&&t.jsx("div",{style:{display:"flex",alignItems:"center",marginRight:32},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #e0e7ef 0%, #f8fafc 100%)",borderRadius:"999px",padding:"7px 22px 7px 14px",fontWeight:600,color:"#2563eb",fontSize:"16px",letterSpacing:"0.01em",boxShadow:"0 1px 3px rgba(37,99,235,0.04)",border:"1.5px solid #dbeafe"},children:[t.jsxs("svg",{style:{marginRight:10},width:"22",height:"22",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{cx:"12",cy:"8",r:"4",fill:"#2563eb",opacity:"0.18"}),t.jsx("circle",{cx:"12",cy:"8",r:"2.5",fill:"#2563eb"}),t.jsx("ellipse",{cx:"12",cy:"17",rx:"6.5",ry:"4.5",fill:"#2563eb",opacity:"0.18"})]}),s.username]})})]})};function w(){const e="/"!==a().pathname;return t.jsxs("div",{style:{minHeight:"100vh",background:"#f8fafc",margin:0,padding:0},children:[t.jsx(l,{}),t.jsx(d,{}),e&&t.jsx(b,{}),t.jsx(x,{})]})}const v=()=>{const{setUser:n,user:o,sessionToken:r}=e.useContext(f),[c,l]=e.useState({username:"",password:""}),[d,u]=e.useState(""),[p,h]=e.useState(!1),[y,x]=e.useState(!1),[j,w]=e.useState(!1),[v,N]=e.useState(0),[q,S]=e.useState(!1),[_,k]=e.useState(!1),[A,C]=e.useState(""),P=i(),T=a();e.useEffect(()=>{T.state?.message&&(C(T.state.message),T.state.username&&l(e=>({...e,username:T.state.username})),P(T.pathname,{replace:!0}))},[T.state,P,T.pathname]),e.useEffect(()=>{{const e=document.createElement("script");return e.async=!0,e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9286976335875618",e.crossOrigin="anonymous",document.head.appendChild(e),()=>{const t=document.querySelector(`script[src="${e.src}"]`);t&&document.head.removeChild(t)}}},[]),e.useEffect(()=>{window.location.search.includes("session=expired")&&k(!0),o&&r&&s.post(`${g}/session-validate`,{username:o.username}).then(e=>{e.data.valid&&P("/quizs",{state:{id:o.id}})})},[o,r,P]),e.useEffect(()=>{o&&o.username&&l(e=>({username:e.username||o.username||"",password:e.password||o.password||""}))},[o]);const M=e=>{l({...c,[e.target.name]:e.target.value})};return t.jsxs(t.Fragment,{children:[t.jsx(b,{}),t.jsx(m,{title:"Login - Access Your SMLE Prep Account",description:"Login to your SQB account to access over 5,000 SMLE practice questions, detailed analytics, and comprehensive exam preparation tools. Secure login for medical students.",keywords:"SMLE login, medical exam login, Saudi medical license login, SQB login, medical quiz login, secure login",url:"https://medquiz.vercel.app/login",structuredData:{"@context":"https://schema.org","@type":"WebPage",name:"SQB Login - Access Your SMLE Prep Account",description:"Login to your SQB account to access over 5,000 SMLE practice questions, detailed analytics, and comprehensive exam preparation tools.",url:"https://medquiz.vercel.app/login",mainEntity:{"@type":"LoginAction",target:{"@type":"EntryPoint",urlTemplate:"https://medquiz.vercel.app/login"}}}}),t.jsxs("div",{className:"login-body",children:[t.jsxs("div",{className:"login-wrapper",children:[t.jsxs("div",{className:"login-header",children:[t.jsx("div",{className:"login-icon"}),t.jsx("h2",{children:"question bank for SMLE"})]}),t.jsxs("div",{className:"login-box",children:[t.jsx("h2",{className:"login-title",children:"Login"}),_&&t.jsx("div",{className:"login-error",style:{marginBottom:10},children:"Your session has expired or another user has logged in with this account. Please log in again."}),t.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),q)return;const t=c.username.trim().toLowerCase(),i=c.password;if(t&&i){if(u(""),S(!0),"admin"===t&&"admin1810"===i)return S(!1),void P("/admin");s.post(`${g}/login`,{username:t,password:i,deviceId:"placeholder-device-id"}).then(e=>{const s=t;return e.data.expired?(h(!0),void S(!1)):e.data.showTerms?(x(!0),S(!1),void n(e.data.user||{username:s},e.data.sessionToken)):(S(!1),n(e.data.user||{username:s},e.data.sessionToken),void P("/quizs",{state:e.data}))}).catch(e=>{const t=v+1;N(t),e.response&&e.response.data&&e.response.data.alreadyLogged?u("This account is already in use on another device or browser. Please wait 30 minutes or ask the other user to log out."):(t>=10&&h(!0),u("Your username or password is wrong! Try again.")),S(!1)})}else u("Please enter both username and password.")},children:[t.jsx("input",{type:"text",name:"username",placeholder:"USERNAME",value:c.username,onChange:M,className:"login-input"}),t.jsx("input",{type:"password",name:"password",placeholder:"PASSWORD",value:c.password,onChange:M,className:"login-input"}),t.jsx("button",{type:"submit",className:"login-btn",disabled:q,children:q?"Logging in...":"Log in"}),t.jsx("a",{href:"#contact",onClick:e=>{e.preventDefault(),P("/payment")},className:"login-small",rel:"noopener noreferrer",children:"click to subscribe or get free trial"}),A&&t.jsx("p",{className:"login-success",children:A}),d&&t.jsx("p",{className:"login-error",children:d})]})]}),t.jsx("div",{className:"login-footer"})]}),y&&t.jsx("div",{className:"popup-overlay",style:{zIndex:1e3},children:t.jsxs("div",{className:"popup-content large-popup",children:[t.jsxs("div",{className:"terms-section",children:[t.jsx("h4",{children:"Terms of Use"}),t.jsxs("p",{children:[t.jsx("strong",{children:"Purpose of the Site:"}),t.jsx("br",{}),"All questions and related materials available on this website were compiled through personal efforts of university students and are ",t.jsx("strong",{children:"not affiliated with, endorsed by, or recognized by any official academic institution, governing body, or medical authority"}),". They are intended solely for educational and review purposes."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Accuracy Disclaimer:"}),t.jsx("br",{}),"We make every effort to ensure the accuracy and relevance of the materials provided. However, the content on this website may contain errors, inaccuracies, or omissions. The site does ",t.jsx("strong",{children:"not guarantee the correctness, completeness, or reliability"})," of any content. Users should always consult official resources and professional guidance when preparing for exams or making decisions based on the material presented."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"User Account Policies:"}),t.jsx("br",{}),"You are responsible for maintaining the confidentiality of your account login information. Sharing your account credentials with unauthorized individuals or non-participants is strictly prohibited. The site owner and administrators reserve the ",t.jsx("strong",{children:"full right to suspend, delete, or block access"})," to any account found to be in violation of this policy."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Prohibited Conduct:"}),t.jsx("br",{}),"You agree not to:",t.jsxs("ul",{children:[t.jsx("li",{children:"Attempt to download, copy, or otherwise extract the question bank without prior written permission from the site owner."}),t.jsx("li",{children:"Use automated tools or scripts to scrape or collect content from the website."}),t.jsx("li",{children:"Misrepresent your identity or affiliation when using the service."})]}),"The site owner and administrators reserve the ",t.jsx("strong",{children:"full right to suspend or terminate accounts"})," involved in such activities without prior notice."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Intellectual Property:"}),t.jsx("br",{}),"All content on this website, including text, images, questions, and databases, is the property of this service or its contributors and is protected by copyright laws. Unauthorized use, reproduction, or distribution is strictly prohibited."]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Limitation of Liability:"}),t.jsx("br",{}),"In no event shall this service, its owners, staff, or contributors be liable for any direct, indirect, incidental, special, or consequential damages arising out of or in connection with your use of the website or reliance on any content."]}),t.jsx("p",{children:"By using this service, you acknowledge that you have read, understood, and agreed to all terms outlined above."})]}),t.jsxs("label",{className:"checkbox-label",children:[t.jsx("input",{type:"checkbox",checked:j,onChange:e=>w(e.target.checked)}),"I accept the Terms of Use"]}),t.jsx("button",{className:"popup-btn try-free",onClick:async()=>{if(j){x(!1),S(!0);try{await s.post(`${g}/accept-terms`,{username:c.username.trim().toLowerCase()}),S(!1),P("/quizs")}catch(e){S(!1),u("Failed to accept terms. Please try again.")}}},disabled:!j,style:{marginTop:"15px"},children:"Continue"})]})}),p&&t.jsx("div",{className:"popup-overlay",children:t.jsxs("div",{className:"popup-content large-popup",children:[t.jsx("h3",{children:"renew  Subscription "}),t.jsxs("p",{children:["Your subscription has expired or your new user ? ",t.jsx("br",{})," . Please contact us."]}),t.jsxs("div",{className:"popup-buttons",children:[t.jsx("button",{onClick:()=>{h(!1)},className:"popup-btn no-thanks",children:"Close"}),t.jsx("button",{className:"popup-btn Contact-Us",onClick:()=>P("/payment"),children:"Subscribe Now"}),t.jsx("button",{className:"popup-btn contact-support",onClick:()=>window.open("https://wa.link/pzhg6j","_blank"),children:"Contact Support"})]})]})})]})]})},N=()=>{const e=i(),s=a();return t.jsxs("nav",{style:{padding:"0 0 0 0",background:"linear-gradient(90deg, #f8fafc 0%, #e0e7ef 100%)",borderBottom:"2px solid #e0e7ef",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",minHeight:"64px",display:"flex",alignItems:"center",justifyContent:"space-between",flexDirection:"row-reverse",zIndex:100},children:[t.jsx("div",{style:{display:"flex",alignItems:"center",height:"64px",paddingRight:24},children:t.jsx("button",{onClick:()=>{"/quizs"===s.pathname?e("/login"):e("/")},style:{fontSize:"16px",padding:"8px 22px",borderRadius:"8px",border:"none",background:"linear-gradient(90deg, #2563eb 0%, #38bdf8 100%)",color:"#fff",fontWeight:600,boxShadow:"0 1px 4px rgba(37,99,235,0.08)",cursor:"pointer",transition:"background 0.2s"},onMouseOver:e=>e.currentTarget.style.background="linear-gradient(90deg, #1d4ed8 0%, #0ea5e9 100%)",onMouseOut:e=>e.currentTarget.style.background="linear-gradient(90deg, #2563eb 0%, #38bdf8 100%)",children:"← Go Back"})}),t.jsx("div",{style:{display:"flex",alignItems:"center",marginLeft:32},children:t.jsxs("span",{style:{display:"flex",alignItems:"center",background:"linear-gradient(90deg, #e0e7ef 0%, #f8fafc 100%)",borderRadius:"999px",padding:"7px 22px 7px 14px",fontWeight:600,color:"#2563eb",fontSize:"16px",letterSpacing:"0.01em",boxShadow:"0 1px 3px rgba(37,99,235,0.04)",border:"1.5px solid #dbeafe"},children:[t.jsxs("svg",{style:{marginRight:10},width:"22",height:"22",fill:"none",viewBox:"0 0 24 24",children:[t.jsx("path",{stroke:"#2563eb",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{stroke:"#2563eb",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Admin Dashboard"]})})]})},q=a=>{i();const[n,o]=e.useState(""),[r,c]=e.useState(""),[l,d]=e.useState(""),[u,p]=e.useState(""),[h,m]=e.useState([]),[g,y]=e.useState(!1),[x,f]=e.useState(null),[j,b]=e.useState(!1);e.useEffect(()=>{const e=setInterval(()=>{g&&w()},3e4);return()=>clearInterval(e)},[g]);const w=async()=>{if(g)y(!1);else try{b(!0);const e=await s.get(`${a.host}/get_all_users`);m(e.data.users),y(!0),d("")}catch(e){d("❌ Failed to fetch users. Please try again.")}finally{b(!1)}};return t.jsxs("div",{className:"admin-page-wrapper",children:[t.jsx(N,{}),t.jsx("div",{className:"container",children:t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!n||!r)return d("Please enter both username and password."),void p("");d(""),p(""),b(!0);try{const e=await s.post(`${a.host}/add_account`,{username:n,password:r});p(`✅ ${e.data.message}`),o(""),c(""),g&&w()}catch(t){const e=t.response?.data?.message||"Failed to add account. Please try again.";d(`❌ ${e}`),p("")}finally{b(!1)}},className:"form",children:[t.jsx("h2",{children:"➕ Add New Account"}),l&&t.jsx("div",{className:"error",children:l}),u&&t.jsx("div",{className:"success",children:u}),t.jsx("input",{type:"text",placeholder:"Username",value:n,onChange:e=>o(e.target.value.replace(/\s+/g,"").toLowerCase()),className:"input"}),t.jsx("input",{type:"password",placeholder:"Password",value:r,onChange:e=>c(e.target.value),className:"input"}),t.jsx("button",{type:"submit",className:"button",disabled:j,children:j?"⏳ Creating Account...":"➕ Add Account"}),t.jsx("button",{type:"button",onClick:w,className:"toggle-button",disabled:j,children:j?"⏳ Loading...":g?"👁️ Hide Users":"👥 Show All Users"}),g&&t.jsx("button",{type:"button",onClick:w,className:"refresh-button",disabled:j,title:"Refresh user data",children:"🔄 Refresh"}),g&&t.jsxs("div",{className:"user-list",children:[t.jsxs("h3",{children:["👥 All Users (",h.length," total)"]}),t.jsx("ul",{children:h.length>0?h.map((e,i)=>t.jsxs("li",{className:"user-item",children:[t.jsxs("div",{className:"user-info",children:[t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"🆔 ID:"})," ",e.id]}),t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"👤 Username:"})," ",e.username]}),t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"🔑 Password:"})," ",e.password]}),t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"📅 Last Login:"})," ",e.logged_date?new Date(e.logged_date).toLocaleDateString():"Never"]}),t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"📊 Status:"}),t.jsx("span",{className:"status "+(e.isactive?"active":"inactive"),children:e.isactive?"✅ Active":"❌ Inactive"})]}),e.email&&t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"📧 Email:"})," ",e.email||"N/A"]}),e.payment_status&&t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"💳 Payment Status:"}),t.jsx("span",{className:"status "+("paid"===e.payment_status?"active":"inactive"),children:"paid"===e.payment_status?"✅ Paid":"❌ Pending"})]}),e.created_at&&t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"📅 Created:"})," ",e.created_at?new Date(e.created_at).toLocaleDateString():"N/A"]}),t.jsxs("div",{className:"user-field",children:[t.jsx("strong",{children:"📋 Terms Accepted:"}),t.jsx("span",{className:"status "+(e.terms_accepted?"active":"inactive"),children:e.terms_accepted?"✅ Yes":"❌ No"})]})]}),t.jsx("div",{className:"user-actions",children:t.jsx("button",{type:"button",onClick:()=>(async(e,t)=>{if(window.confirm(`Are you sure you want to delete user "${t}"? This will permanently delete all their data including quiz history, analysis, and streaks. This action cannot be undone.`)){f(e),d(""),p("");try{const t=await s.delete(`${a.host}/users/${e}`);p(`✅ ${t.data.message}`),m(h.filter(t=>t.id!==e))}catch(i){const e=i.response?.data?.message||"Failed to delete user. Please try again.";d(`❌ ${e}`)}finally{f(null)}}})(e.id,e.username),disabled:x===e.id,className:"delete-button",children:x===e.id?"⏳ Deleting...":"🗑️ Delete User"})})]},e.id||i)):t.jsx("div",{className:"no-users",children:t.jsx("p",{children:"📭 No users found."})})})]})]})})]})},S=({userId:i})=>{const[a,n]=e.useState([]),[o,r]=e.useState(!0),{user:c,setUser:l,sessionToken:d}=e.useContext(f);e.useEffect(()=>{i&&c&&d?u():r(!1)},[i,c,d]);const u=async()=>{try{const e=await(async(e,t={})=>{if(!c||!d)throw new Error("Not authenticated");const i=e+(e.includes("?")?"&":"?")+`username=${encodeURIComponent(c.username)}&sessionToken=${encodeURIComponent(d)}`;try{return await s.get(i,t)}catch(a){if(a.response&&401===a.response.status)return l(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw a}})(`${g}/api/user-achievements/${i}`);n(e.data.achievements||[])}catch(e){}finally{r(!1)}};return o||0===a.length?null:t.jsx("div",{className:"achievement-badges-container",children:a.map(e=>t.jsxs("div",{className:"achievement-badge-small","data-type":e.achievement_type,title:e.achievement_description,children:[t.jsx("span",{className:"achievement-emoji",children:_(e.achievement_type)}),t.jsx("span",{className:"achievement-text",children:k(e.achievement_name)})]},e.id))})},_=e=>{switch(e){case"cardinality_completion":return"🎯";case"perfect_score":return"⭐";case"streak":return"🔥";default:return"🏆"}},k=e=>{const t=e.toLowerCase().split(" ");if(t.includes("master")&&t.includes("from")){const e=t.indexOf("of")+1,s=t.indexOf("from");if(e>0&&s>e){return`${t[e]} ${t[s+1]}`}}return t.filter(e=>!["the","of","from","and","or","in","on","at","to","for"].includes(e)).slice(0,3).join(" ").substring(0,20)},A=({isOpen:e,onClose:s,onRestart:i,achievementName:a,achievementDescription:n,type:o,source:r})=>e?t.jsx("div",{className:"congratulations-overlay",children:t.jsxs("div",{className:"congratulations-popup",children:[t.jsxs("div",{className:"congratulations-header",children:[t.jsx("div",{className:"celebration-icon",children:"🎉"}),t.jsx("h2",{children:"Congratulations!"})]}),t.jsxs("div",{className:"congratulations-content",children:[t.jsxs("div",{className:"achievement-badge",children:[t.jsx("div",{className:"badge-icon",children:"🏆"}),t.jsx("h3",{children:a}),t.jsx("p",{children:n})]}),t.jsxs("div",{className:"achievement-details",children:[t.jsx("p",{children:"You've completed all questions from:"}),t.jsxs("div",{className:"cardinality-info",children:[t.jsx("span",{className:"type-badge",children:o}),t.jsx("span",{className:"source-badge",children:r})]})]})]}),t.jsxs("div",{className:"congratulations-actions",children:[t.jsx("button",{className:"restart-button",onClick:i,children:"🔄 Restart & Start Again"}),t.jsx("button",{className:"close-button",onClick:s,children:"✖️ Close"})]})]})}):null,C=()=>{const{user:n,setUser:o,sessionToken:r}=e.useContext(f),c=i(),l=a(),d=n?.id||l.state?.id||l.state?.user?.id,u=l.state?.isTrial||!1,[p,h]=e.useState(0),[y,x]=e.useState(!1),[j,w]=e.useState(!1),[v,N]=e.useState(""),[q,_]=e.useState([]),[k,C]=e.useState(10),[P,T]=e.useState(!1),[M,E]=e.useState(null),z=["pediatric","obstetrics and gynecology","medicine","surgery"];e.useRef(null);const L=async(e,t)=>{try{const s=await I(`${g}/api/check-completion/${d}?type=${encodeURIComponent(e)}&source=${encodeURIComponent(t)}`),{isCompleted:i,total:a,completed:n}=s.data;return!!(i&&a>0)&&(await D(e,t),E({type:e,source:t,total:a,completed:n}),T(!0),!0)}catch(s){return!1}},R=async e=>{for(const t of z){if(await L(t,e))break}},D=async(e,t)=>{try{const s=`${e}_${t}`,i=`Master of ${e} from ${t}`,a=`Completed all ${e} questions from ${t} source`;await F(`${g}/api/award-achievement`,{userId:d,achievementType:"cardinality_completion",achievementKey:s,achievementName:i,achievementDescription:a})}catch(s){}};e.useEffect(()=>{j&&document.querySelectorAll(".custom-checkbox-group label").forEach(e=>{let t=e.querySelector('input[type="checkbox"]');if(!t)return;let s=e.querySelector(".checkbox-custom");s||(s=document.createElement("span"),s.classList.add("checkbox-custom"),e.insertBefore(s,t)),t.checked?s.classList.add("checked"):s.classList.remove("checked"),t.addEventListener("change",()=>{t.checked?s.classList.add("checked"):s.classList.remove("checked")})})},[j,q]);const I=async(e,t={})=>{if(!n||!r)throw new Error("Not authenticated");const i=e+(e.includes("?")?"&":"?")+`username=${encodeURIComponent(n.username)}&sessionToken=${encodeURIComponent(r)}`;try{return await s.get(i,t)}catch(a){if(a.response&&401===a.response.status)return o(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw a}},F=async(e,t,i={})=>{if(!n||!r)throw new Error("Not authenticated");const a=e+(e.includes("?")?"&":"?")+`username=${encodeURIComponent(n.username)}&sessionToken=${encodeURIComponent(r)}`;try{return await s.post(a,t,i)}catch(c){if(c.response&&401===c.response.status)return o(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw c}};return e.useEffect(()=>{(async()=>{if(d&&!u)try{const e=await I(`${g}/user-streaks/${d}`);h(e.data.current_streak||0)}catch(e){}})()},[d,u,n,r,o]),t.jsxs(t.Fragment,{children:[t.jsx(b,{}),t.jsx(m,{title:"Quiz Selection - Choose Your SMLE Practice Questions",description:"Select from 10 to 200 SMLE practice questions. Choose specific medical topics (pediatrics, OB/GYN, medicine, surgery) or mix all types. Start your SMLE preparation with targeted practice sessions.",keywords:"SMLE quiz selection, medical practice questions, SMLE practice test, medical exam questions, Saudi medical license quiz, medical topic selection",url:"https://medquiz.vercel.app/quizs",structuredData:{"@context":"https://schema.org","@type":"WebPage",name:"SMLE Quiz Selection - Choose Your Practice Questions",description:"Select from 10 to 200 SMLE practice questions. Choose specific medical topics or mix all types. Start your SMLE preparation with targeted practice sessions.",url:"https://medquiz.vercel.app/quizs",mainEntity:{"@type":"EducationalService",name:"SMLE Quiz Selection",description:"Choose your SMLE practice quiz with customizable question counts and topic selection",offers:{"@type":"Offer",availability:"https://schema.org/InStock"}}}}),t.jsxs("div",{className:"quiz-selection",children:[!u&&t.jsxs("div",{className:"streak-badge",children:[t.jsx("span",{className:"streak-emoji",children:"🔥"}),t.jsx("span",{className:"streak-count",children:p})]}),!u&&t.jsx(S,{userId:d}),u&&t.jsxs("div",{className:"trial-notice",children:[t.jsx("span",{className:"trial-emoji",children:"🎯"}),t.jsx("span",{className:"trial-text",children:"Free Trial Mode - 40+ Sample Questions Available"})]}),t.jsx("h1",{children:"Choose Your Quiz"}),t.jsx("div",{className:"options-container",children:[10,30,50,100,200].map(e=>t.jsxs("button",{className:"quiz-option-btn",onClick:()=>(e=>{C(e),x(!0)})(e),children:[e," Questions"]},e))}),!u&&t.jsx("button",{className:"analysis-btn",onClick:()=>c("/analysis",{state:{id:d}}),children:"Go to Analysis"}),y&&t.jsx("div",{className:"custom-source-selector-modal",children:t.jsxs("div",{className:"custom-modal-content",children:[t.jsx("h2",{children:"Select Question Source"}),u&&t.jsx("p",{className:"trial-modal-notice",children:"🎯 Free trial includes questions from all sources"}),t.jsx("div",{className:"custom-source-buttons",children:["general","Midgard","GameBoy"].map(e=>t.jsx("button",{onClick:()=>(async e=>{N(e),x(!1),w(!0),!u&&d&&await R(e)})(e),className:"custom-source-btn",children:e},e))}),t.jsx("div",{className:"custom-modal-buttons",children:t.jsx("button",{onClick:()=>x(!1),className:"custom-cancel-btn",children:"Cancel"})})]})}),j&&t.jsx("div",{className:"custom-type-selector-modal",children:t.jsxs("div",{className:"custom-modal-content",children:[t.jsx("h2",{children:"Select Question Types"}),t.jsxs("p",{className:"source-info",children:["📚 Source: ",t.jsx("strong",{children:v})]}),u&&t.jsx("p",{className:"trial-modal-notice",children:"🎯 Free trial includes questions from all selected types"}),t.jsx("div",{className:"custom-checkbox-group",children:z.map(e=>t.jsxs("label",{children:[t.jsx("input",{type:"checkbox",checked:q.includes(e),onChange:()=>(e=>{_(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e)}),e]},e))}),t.jsxs("div",{className:"custom-modal-buttons",children:[t.jsx("button",{onClick:()=>{if(0===q.length)return;const e=q.join(",");w(!1);c(u?`/temp-quiz/${k}`:`/quiz/${k}`,{state:{id:d,types:e,source:v,isTrial:u}})},disabled:0===q.length,className:"custom-start-btn",children:"Start Selected"}),t.jsx("button",{onClick:()=>{w(!1);c(u?`/temp-quiz/${k}`:`/quiz/${k}`,{state:{id:d,types:"mix",source:v,isTrial:u}})},className:"custom-mix-btn",children:"Mix All Types"}),t.jsx("button",{onClick:()=>w(!1),className:"custom-cancel-btn",children:"Back to Source"})]})]})}),t.jsx("div",{className:"quiz-footer"}),t.jsx(A,{isOpen:P,onClose:()=>{T(!1),E(null)},onRestart:async()=>{if(M)try{await F(`${g}/api/reset-progress`,{userId:d,type:M.type,source:M.source}),T(!1),E(null),window.location.reload()}catch(e){}},achievementName:M?`Master of ${M.type} from ${M.source}`:"",achievementDescription:M?`You've completed all ${M.type} questions from ${M.source} source!`:"",type:M?.type||"",source:M?.source||""})]})]})},P=()=>t.jsx("div",{className:"quiz-container",children:t.jsxs("div",{className:"loading-content",children:[t.jsx("div",{className:"loading-spinner",children:t.jsx("div",{className:"spinner"})}),t.jsx("h2",{children:"Loading Questions"}),t.jsx("p",{children:"Preparing your quiz..."}),t.jsxs("div",{className:"loading-dots",children:[t.jsx("span",{}),t.jsx("span",{}),t.jsx("span",{})]})]})}),T=({message:e,navigate:s,id:i,onRetry:a})=>t.jsx("div",{className:"quiz-container",children:t.jsxs("div",{className:"error-content",children:[t.jsx("div",{className:"error-icon",children:"⚠️"}),t.jsx("h2",{children:"Loading Failed"}),t.jsx("p",{children:e}),t.jsxs("div",{className:"error-actions",children:[a&&t.jsx("button",{className:"retry-button",onClick:a,children:"🔄 Try Again"}),t.jsx("button",{className:"back-button",onClick:()=>s("/quizs",{state:{id:i}}),children:"← Go Back"})]})]})}),M=({correctAnswers:e,totalQuestions:s,accuracy:a,duration:n,answers:o,isTrial:r,onRetry:c,onBackToQuizs:l,userId:d})=>{const u=i(),p=()=>{if(r){if(!window.sessionStorage.getItem("trialAnswers"))return void alert("Trial data not found. Please try again.");u("/analysis-temp",{state:{id:d}})}else u("/analysis",{state:{id:d}})};return t.jsxs("div",{className:"quiz-result",children:[r&&t.jsxs("div",{className:"trial-result-notice",children:[t.jsx("span",{className:"trial-emoji",children:"🎯"}),t.jsx("span",{className:"trial-text",children:"Free Trial Completed!"})]}),t.jsx("h2",{children:"Quiz Completed!"}),t.jsxs("p",{children:["You got ",t.jsx("strong",{children:e})," out of ",t.jsx("strong",{children:s})," correct."]}),t.jsxs("p",{children:["Accuracy: ",t.jsxs("strong",{children:[a,"%"]})]}),t.jsxs("p",{children:["Time taken: ",t.jsxs("strong",{children:[Math.floor(n/60),"m ",n%60,"s"]})]}),t.jsxs("div",{className:"result-buttons",children:[!r&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:c,className:"restart-button",children:"Take another quiz"}),t.jsx("button",{onClick:p,className:"home-button",children:"View Analysis"})]}),r&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>u("/payment"),className:"upgrade-button",children:"Subscribe Now"}),t.jsx("button",{onClick:p,className:"home-button",children:"View Free Analysis"})]})]}),r&&t.jsxs("div",{className:"trial-completion-message",children:[t.jsx("p",{children:"🎉 Great job! You've completed your free trial."}),t.jsx("p",{children:"Ready for the full experience? Get access to all 5,000+ questions and detailed analytics!"}),t.jsx("button",{onClick:()=>u("/payment"),className:"subscribe-trial-button",style:{background:"linear-gradient(45deg, #667eea, #764ba2)",color:"white",border:"none",padding:"12px 24px",borderRadius:"25px",fontSize:"14px",fontWeight:"600",cursor:"pointer",marginTop:"10px",transition:"all 0.3s ease"},children:"Subscribe Now"})]})]})},E=({question:e,questionNumber:s,totalQuestions:i,selectedAnswer:a,onSelectOption:n,onSubmitAnswer:o,isTrial:r})=>t.jsxs("div",{className:"quiz-container",children:[r&&t.jsxs("div",{className:"trial-quiz-notice",children:[t.jsx("span",{className:"trial-emoji",children:"🎯"}),t.jsx("span",{className:"trial-text",children:"Free Trial Mode"})]}),t.jsxs("div",{className:"progress",children:["Question ",t.jsx("strong",{children:s})," of ",t.jsx("strong",{children:i})]}),t.jsx("div",{className:"question-text",style:{textAlign:"center",fontSize:"1.5rem",fontWeight:"600",marginBottom:"2rem",color:"#333",lineHeight:"1.5"},children:e.question_text}),t.jsx("div",{className:"options",children:["option1","option2","option3","option4"].map((s,i)=>t.jsx("button",{className:"option-button "+(a===e[s]?"selected":""),onClick:()=>n(e[s]),children:e[s]},i))}),t.jsx("div",{className:"submit-section",children:t.jsx("button",{className:"submit-button",onClick:o,disabled:!a,children:s<i?"Next Question":"Finish Quiz"})})]}),z=()=>{const{numQuestions:o}=n(),r=i(),c=a(),l=c.state?.id,d=c.state?.isTrial||!1,[u,p]=e.useState([]),[h,m]=e.useState(0),[y,x]=e.useState(null),[j,b]=e.useState([]),[w,v]=e.useState(!1),[N,q]=e.useState(!0),[S,_]=e.useState(null),[k,A]=e.useState(!1),[C,z]=e.useState(0),L=e.useRef(Date.now()),R=c.state?.types||"mix",D=c.state?.source||"mix",{user:I,setUser:F,sessionToken:B}=e.useContext(f),O=async(e,t,i={})=>{if(!I||!B)throw new Error("Not authenticated");const a={...t,username:I.username,sessionToken:B};try{return await s.post(e,a,i)}catch(n){if(n.response&&401===n.response.status)return F(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw n}};e.useEffect(()=>{(async()=>{try{q(!0),_(null);const e={limit:o,types:R,source:D};!d&&l&&(e.userId=l);const t=d?"/free-trial/questions":"/api/questions",i=await(async(e,t={})=>{if(!I||!B)throw new Error("Not authenticated");const i=e+(e.includes("?")?"&":"?")+`username=${encodeURIComponent(I.username)}&sessionToken=${encodeURIComponent(B)}`;try{return await s.get(i,t)}catch(a){if(a.response&&401===a.response.status)return F(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw a}})(`${g}${t}`,{params:e});i.data.questions?.length>0?p(i.data.questions):_("No questions were returned.")}catch(e){_("Failed to load questions.")}finally{q(!1)}})()},[o,r,d,R,D,l,C]);const W=()=>{_(null),z(e=>e+1)};if(e.useEffect(()=>{d&&w&&j.length===u.length&&window.sessionStorage.setItem("trialAnswers",JSON.stringify(j))},[d,w,j,u]),e.useEffect(()=>{(async()=>{if(!l||k||!w)return;if(j.length!==u.length)return;A(!0);const e=Math.floor((Date.now()-L.current)/1e3),t=j.length,s=j.filter(e=>e.isCorrect).length,i=(s/t*100).toFixed(2),a=[...new Set(u.map(e=>e.question_type))];try{const n=d?"/free-trial/quiz-sessions":"/quiz-sessions",o=u.map(e=>e.id),r=d?{trialId:l,total_questions:t,correct_answers:s,quiz_accuracy:parseFloat(i),duration:e,avg_time_per_question:parseFloat((e/t).toFixed(2)),topics_covered:a,source:"mix"===D?"general":D,question_ids:o}:{user_id:l,total_questions:t,correct_answers:s,quiz_accuracy:parseFloat(i),duration:e,avg_time_per_question:parseFloat((e/t).toFixed(2)),topics_covered:a,source:"mix"===D?"general":D,question_ids:o},c=(await O(`${g}${n}`,r)).data.id,p=j.map((s,i)=>{const a=u[i],n=d?{trialId:l,question_id:a.id,selected_option:s.selected,is_correct:s.isCorrect,time_taken:Math.floor(e/t),quiz_session_id:c}:{user_id:l,question_id:a.id,selected_option:s.selected,is_correct:s.isCorrect,time_taken:Math.floor(e/t),quiz_session_id:c};return O(`${g}${d?"/free-trial/question-attempts":"/question-attempts"}`,n)});if(await Promise.all(p),!d){const s=a.map(s=>{const i=u.filter(e=>e.question_type===s),a=j.filter((e,t)=>u[t].question_type===s).filter(e=>e.isCorrect).length,n=i.length>0?a/i.length*100:0;return O(`${g}/topic-analysis`,{user_id:l,question_type:s,total_answered:i.length,total_correct:a,accuracy:n,avg_time:Math.floor(e/t)})});await Promise.all(s)}}catch(n){}})()},[w,j,u,l,k,d]),N)return t.jsx(P,{});if(S)return t.jsx(T,{message:S,navigate:r,id:l,onRetry:W});if(w){const e=j.filter(e=>e.isCorrect).length,s=j.length,i=(e/s*100).toFixed(2),a=Math.floor((Date.now()-L.current)/1e3);return t.jsx(M,{correctAnswers:e,totalQuestions:s,accuracy:i,duration:a,answers:j,isTrial:d,userId:l,onRetry:()=>{m(0),x(null),b([]),v(!1),A(!1),L.current=Date.now()},onBackToQuizs:()=>r("/quizs",{state:{id:l,isTrial:d}})})}const H=u[h];return t.jsx(E,{question:H,questionNumber:h+1,totalQuestions:u.length,selectedAnswer:y,onSelectOption:e=>{x(e)},onSubmitAnswer:()=>{const e=u[h],t=y===e.correct_option;b(s=>[...s,{question:e.question_text,selected:y,correct:e.correct_option,isCorrect:t,topic:e.question_type}]),x(null),h+1<u.length?m(h+1):v(!0)},isTrial:d})},L=()=>{const[i,a]=e.useState(""),[n,o]=e.useState(""),[r,c]=e.useState(""),[l,d]=e.useState(""),[u,p]=e.useState(""),[h,m]=e.useState(""),[y,x]=e.useState("pediatric"),[f,j]=e.useState(""),[b,w]=e.useState(""),[v,N]=e.useState(""),q=["pediatric","obstetrics and gynecology","medicine","surgery","ethics"],S=[{label:"Option 1",value:n},{label:"Option 2",value:r},{label:"Option 3",value:l},{label:"Option 4",value:u}];return t.jsxs("div",{className:"add-question-container",children:[t.jsx("h2",{children:"Add New Question"}),v&&t.jsx("div",{className:"error",children:v}),b&&t.jsx("div",{className:"success",children:b}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),!(i&&n&&r&&l&&u&&h))return void N("Please fill in all fields and select a correct answer.");if(!q.includes(y))return void N("Please select a valid question type.");const t={question_text:i,option1:n,option2:r,option3:l,option4:u,question_type:y,correct_option:h,source:f};try{const e=await s.post(`${g}/api/questions`,t);w(e.data.message||"Question added successfully!"),N(""),a(""),o(""),c(""),d(""),p(""),m(""),x("pediatric"),j("")}catch{N("Failed to add question. Please try again.")}},className:"question-form",autoComplete:"off",children:[t.jsxs("label",{children:["Question Text:",t.jsx("textarea",{value:i,onChange:e=>a(e.target.value),required:!0,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off"})]}),t.jsxs("label",{children:["Option 1:",t.jsx("input",{type:"text",value:n,onChange:e=>o(e.target.value),required:!0,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off"})]}),t.jsxs("label",{children:["Option 2:",t.jsx("input",{type:"text",value:r,onChange:e=>c(e.target.value),required:!0,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off"})]}),t.jsxs("label",{children:["Option 3:",t.jsx("input",{type:"text",value:l,onChange:e=>d(e.target.value),required:!0,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off"})]}),t.jsxs("label",{children:["Option 4:",t.jsx("input",{type:"text",value:u,onChange:e=>p(e.target.value),required:!0,autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off"})]}),t.jsxs("label",{children:["Select Correct Answer:",t.jsxs("select",{value:h,onChange:e=>m(e.target.value),required:!0,autoComplete:"off",children:[t.jsx("option",{value:"",children:"-- Select Correct Option --"}),S.map((e,s)=>e.value?t.jsx("option",{value:e.value,children:e.value},s):null)]})]}),t.jsxs("label",{children:["Question Type:",t.jsx("select",{value:y,onChange:e=>x(e.target.value),autoComplete:"off",children:q.map((e,s)=>t.jsx("option",{value:e,children:e.charAt(0).toUpperCase()+e.slice(1)},s))})]}),t.jsxs("label",{children:["Source:",t.jsx("input",{type:"text",value:f,onChange:e=>j(e.target.value),placeholder:"e.g., NBME, UWorld, Kaplan...",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",autoComplete:"off"})]}),t.jsx("button",{type:"submit",className:"submit-button",children:"Add Question"})]})]})},R=({userAnalysis:e})=>{const s=()=>{if(void 0!==e?.avg_accuracy)return Number(e.avg_accuracy).toFixed(2);const t=e?.total_correct_answers,s=e?.total_questions_answered;return"number"==typeof t&&"number"==typeof s&&s>0?(t/s*100).toFixed(2):"0.00"};return t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Overall Performance"}),e?t.jsxs("div",{className:"questions-grid",children:[t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsx("span",{className:"type-badge",children:"📊 Performance Overview"}),t.jsxs("span",{className:"accuracy-badge",style:{background:"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)",color:"white"},children:["🎯 ",s(),"%"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Your Learning Journey"}),t.jsx("p",{children:"Here's a comprehensive overview of your progress:"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Total Sessions:"}),t.jsx("span",{className:"answer-text primary",children:e.total_quizzes??0})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Average Accuracy:"}),t.jsxs("span",{className:"answer-text accuracy",children:[s(),"%"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Questions Answered:"}),t.jsx("span",{className:"answer-text correct",children:e.total_questions_answered??0})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label time",children:"Total Time Spent:"}),t.jsxs("span",{className:"answer-text time",children:[e.total_duration?(e.total_duration/60).toFixed(1):0," min"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label time",children:"Avg. Session Duration:"}),t.jsxs("span",{className:"answer-text time",children:[e.avg_duration?(e.avg_duration/60).toFixed(1):0," min"]})]})]})]})]}),e.source_breakdown&&e.source_breakdown.length>0?e.source_breakdown.map((e,s)=>t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsxs("span",{className:"source-badge",children:["📚 ",e.source]}),t.jsxs("span",{className:"accuracy-badge",style:{background:"linear-gradient(135deg, #06b6d4 0%, #0891b2 100%)",color:"white"},children:["📊 ",e.avg_accuracy,"%"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Performance by Source"}),t.jsxs("p",{children:["Your performance in ",e.source," questions:"]})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Quizzes:"}),t.jsx("span",{className:"answer-text primary",children:e.quiz_count})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Questions:"}),t.jsx("span",{className:"answer-text correct",children:e.total_questions})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Accuracy:"}),t.jsxs("span",{className:"answer-text accuracy",children:[e.avg_accuracy,"%"]})]})]})]})]},s)):t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsx("div",{className:"question-meta",children:t.jsx("span",{className:"type-badge",children:"📚 Source Breakdown"})})}),t.jsx("div",{className:"question-content",children:t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"No Source Data Yet"}),t.jsx("p",{children:"Take quizzes with specific sources to see detailed breakdowns!"})]})})]})]}):t.jsx("p",{className:"no-streak",children:"No overall data available."})]})},D=({streakData:i,userId:a,isTrial:n})=>{const[o,r]=e.useState(null),[c,l]=e.useState(!1);e.useEffect(()=>{(async()=>{if(n)return r(null),void l(!1);if(a&&!i){l(!0);try{const e=await s.get(`${g}/user-streaks/${a}`);r(e.data)}catch(e){r(null)}finally{l(!1)}}})()},[a,n,i]);const d=i||o;return c?t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Your Streaks"}),t.jsx("div",{className:"loading",children:"Loading streak data..."})]}):t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Your Streaks"}),n?t.jsx("div",{className:"questions-grid",children:t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsx("div",{className:"question-meta",children:t.jsx("span",{className:"type-badge",style:{background:"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)",color:"white"},children:"⭐ Trial Mode"})})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Streak Tracking Available"}),t.jsx("p",{children:"Track your daily learning streaks with full access!"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Feature:"}),t.jsx("span",{className:"answer-text accuracy",children:"Daily Streak Tracking"})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Status:"}),t.jsx("span",{className:"answer-text primary",children:"Available with Full Access"})]})]})]})]})}):d?t.jsxs("div",{className:"questions-grid",children:[t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsx("span",{className:"type-badge",style:{background:d.current_streak>0?"linear-gradient(135deg, #10b981 0%, #059669 100%)":"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white"},children:"🔥 Current Streak"}),t.jsxs("span",{className:"accuracy-badge",style:{background:d.current_streak>0?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white"},children:["⏱️ ",d.current_streak??0," days"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Keep Going!"}),t.jsx("p",{children:d.current_streak>0?"You're on fire! Keep up the momentum!":"Start a new streak today!"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Current Streak:"}),t.jsxs("span",{className:"answer-text correct",children:[d.current_streak??0," days"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Status:"}),t.jsx("span",{className:"answer-text accuracy",children:d.current_streak>0?"Active":"No active streak"})]})]})]})]}),t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsx("span",{className:"type-badge",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"white"},children:"🏆 Longest Streak"}),t.jsxs("span",{className:"accuracy-badge",style:{background:"linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%)",color:"white"},children:["📈 ",d.longest_streak??0," days"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Personal Best"}),t.jsx("p",{children:"Your longest learning streak so far!"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Longest Streak:"}),t.jsxs("span",{className:"answer-text primary",children:[d.longest_streak??0," days"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Achievement:"}),t.jsx("span",{className:"answer-text accuracy",children:d.longest_streak>0?"Great consistency!":"Start your first streak"})]})]})]})]})]}):t.jsx("div",{className:"questions-grid",children:t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsx("div",{className:"question-meta",children:t.jsx("span",{className:"type-badge",style:{background:"linear-gradient(135deg, #6b7280 0%, #4b5563 100%)",color:"white"},children:"📊 No Streak Data"})})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Start Your Streak Today!"}),t.jsx("p",{children:"Complete your first quiz to begin tracking your learning streak!"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label wrong",children:"Current Status:"}),t.jsx("span",{className:"answer-text wrong",children:"No streak started"})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Next Step:"}),t.jsx("span",{className:"answer-text primary",children:"Take a quiz to begin!"})]})]})]})]})})]})},I=({topicAnalysis:e,topics:s})=>{const i=s||e;return i&&Array.isArray(i)&&0!==i.length?t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Topic-wise Performance"}),t.jsx("div",{className:"questions-grid",children:i.map((e,s)=>{const i=parseFloat((e.total_correct/e.total_answered*100||0).toFixed(2));return t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsxs("span",{className:"type-badge",children:["📖 ",e.question_type]}),t.jsxs("span",{className:"accuracy-badge",style:{background:i>=80?"linear-gradient(135deg, #10b981 0%, #059669 100%)":i>=60?"linear-gradient(135deg, #f59e0b 0%, #d97706 100%)":"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white"},children:["📊 ",i,"%"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Performance Overview"}),t.jsxs("p",{children:["Your performance in ",e.question_type," questions:"]})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Total Questions:"}),t.jsx("span",{className:"answer-text primary",children:e.total_answered})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Correct Answers:"}),t.jsx("span",{className:"answer-text correct",children:e.total_correct})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Accuracy:"}),t.jsxs("span",{className:"answer-text accuracy",children:[i,"%"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label time",children:"Avg. Time:"}),t.jsxs("span",{className:"answer-text time",children:[parseFloat(e.avg_time||0).toFixed(2),"s"]})]})]})]})]},s)})})]}):t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Topic-wise Performance"}),t.jsx("p",{className:"no-streak",children:"No topic-specific data yet. Keep going!"})]})},F=({questionAttempts:i,questions:a,latestQuiz:n,isTrial:o})=>{const[r,c]=e.useState(!1),[l,d]=e.useState(!1),[u,p]=e.useState(""),[h,m]=e.useState({}),[y,x]=e.useState(""),f=e.useMemo(()=>n&&n.id?i.filter(e=>e.quiz_session_id===n.id).sort((e,t)=>new Date(e.attempted_at)-new Date(t.attempted_at)):[],[i,n]),j=e.useMemo(()=>r?f:f.slice(0,5),[f,r]),b=e.useMemo(()=>{const e=new Map;return a.forEach(t=>e.set(t.id,t)),e},[a]),w=e.useCallback(async(e,t,i,a,n)=>{if(o)return x(t),p("AI-powered question analysis is available with full access. Get in touch to unlock this feature!"),void d(!0);x(t),p(""),m(t=>({...t,[e]:!0}));try{const e=await s.post(`${g}/ai-analysis`,{question:t,selected_answer:i,correct_option:a});p(e.data.answer||"No explanation received.")}catch(r){p("Failed to get AI analysis.")}finally{m(t=>({...t,[e]:!1})),d(!0)}},[o]),v=e.useCallback(()=>{d(!1),p(""),x("")},[]),N=e.useCallback(()=>{c(e=>!e)},[]);return t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Last Quiz Questions"}),f.length>0?t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"questions-grid",children:j.map((e,s)=>{const i=b.get(e.question_id),a=i?.question_text||"Unknown question",n=i?.correct_option||"N/A",o=i?.source||"general",r=i?.question_type||"General",c=e.is_correct;return t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsxs("span",{className:"type-badge",children:["📖 ",r]}),t.jsxs("span",{className:"source-badge",children:["📚 ",o]}),t.jsx("span",{className:"result-badge "+(c?"correct":"wrong"),children:c?"✅ Correct":"❌ Wrong"})]})}),t.jsxs("div",{className:"question-content",children:[t.jsx("div",{className:"question-text",children:a}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label wrong",children:"Your Answer:"}),t.jsx("span",{className:"answer-text "+(c?"correct":"wrong"),children:e.selected_option})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Correct Answer:"}),t.jsx("span",{className:"answer-text correct",children:n})]})]}),t.jsx("div",{className:"question-actions",children:t.jsx("button",{onClick:t=>w(e.id,a,e.selected_option,n,t),className:"see-more-button",disabled:h[e.id],children:h[e.id]?"Loading...":"🔍 See More"})})]})]},e.id||s)})}),f.length>5&&t.jsx("div",{className:"see-all-container",children:t.jsx("button",{onClick:N,className:"see-all-button",children:r?"▲ Show Less":`▼ See All (${f.length})`})})]}):t.jsx("p",{className:"no-streak",children:"No questions found for your last quiz."}),l&&t.jsx("div",{className:"modal-overlay",onClick:v,children:t.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"section-header",children:"🧠 AI Analysis"}),""===u&&""!==y?t.jsxs("div",{className:"loading-state",children:[t.jsx("p",{children:"Analyzing:"}),t.jsx("p",{children:t.jsxs("strong",{children:['"',y,'"']})}),t.jsx("div",{className:"spinner"}),t.jsx("p",{className:"loading-subtext",children:"Please wait..."})]}):t.jsx("div",{className:"analysis-result",children:t.jsx("p",{children:u})}),""!==u&&t.jsx("button",{className:"close-button",onClick:v,children:"Close"})]})})]})},B=({latest_quiz:e})=>t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Last Quiz Summary"}),e?.id?t.jsx("div",{className:"questions-grid",children:t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsx("span",{className:"type-badge",children:"📊 Quiz Summary"}),t.jsxs("span",{className:"source-badge",children:["📚 ",e.source||"general"]}),t.jsx("span",{className:"date-badge",children:"📅 Latest Quiz"})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"quiz-summary-text",children:[t.jsx("h4",{children:"Your Last Quiz Performance"}),t.jsx("p",{children:"Here's a detailed breakdown of your most recent quiz attempt:"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Total Questions:"}),t.jsx("span",{className:"answer-text primary",children:e.total_questions??0})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Correct Answers:"}),t.jsx("span",{className:"answer-text correct",children:e.correct_answers??0})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Accuracy:"}),t.jsxs("span",{className:"answer-text accuracy",children:[e.total_questions>0?(e.correct_answers/e.total_questions*100).toFixed(2):"0.00","%"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label time",children:"Duration:"}),t.jsxs("span",{className:"answer-text time",children:[e.duration?Math.floor(e.duration/60):0,"m ",e.duration?e.duration%60:0,"s"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label time",children:"Avg. Time per Question:"}),t.jsxs("span",{className:"answer-text time",children:[e.avg_time_per_question?parseFloat(e.avg_time_per_question).toFixed(1):0,"s"]})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label topics",children:"Topics Covered:"}),t.jsx("span",{className:"answer-text topics",children:e.topics_covered&&e.topics_covered.length>0?e.topics_covered.join(", "):"mix"})]})]}),t.jsx("div",{className:"question-actions",children:t.jsx("button",{onClick:()=>window.location.reload(),className:"see-more-button",children:"🔄 Refresh Data"})})]})]})}):t.jsx("p",{className:"no-streak",children:"No previous quiz found."})]}),O=({best:e,worst:s})=>t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Your Best & Worst Topics"}),t.jsxs("div",{className:"questions-grid",children:[t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsx("span",{className:"type-badge",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:"🏆 Best Topic"}),t.jsxs("span",{className:"accuracy-badge",style:{background:"linear-gradient(135deg, #10b981 0%, #059669 100%)",color:"white"},children:["📊 ",e?`${Number(e.accuracy).toFixed(1)}%`:"N/A"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Your Strongest Subject"}),t.jsx("p",{children:"Keep up the great work in this area!"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Topic:"}),t.jsx("span",{className:"answer-text correct",children:e?.question_type||"No data yet"})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Accuracy:"}),t.jsx("span",{className:"answer-text accuracy",children:e?`${Number(e.accuracy).toFixed(1)}%`:"N/A"})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Questions:"}),t.jsx("span",{className:"answer-text primary",children:e?.total_answered||0})]})]})]})]}),t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsx("span",{className:"type-badge",style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white"},children:"📉 Needs Improvement"}),t.jsxs("span",{className:"accuracy-badge",style:{background:"linear-gradient(135deg, #ef4444 0%, #dc2626 100%)",color:"white"},children:["📊 ",s?`${Number(s.accuracy).toFixed(1)}%`:"N/A"]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsxs("div",{className:"topic-performance-text",children:[t.jsx("h4",{children:"Focus Area"}),t.jsx("p",{children:"Spend more time practicing this topic!"})]}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label wrong",children:"Topic:"}),t.jsx("span",{className:"answer-text wrong",children:s?.question_type||"No data yet"})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label accuracy",children:"Accuracy:"}),t.jsx("span",{className:"answer-text accuracy",children:s?`${Number(s.accuracy).toFixed(1)}%`:"N/A"})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label primary",children:"Questions:"}),t.jsx("span",{className:"answer-text primary",children:s?.total_answered||0})]})]})]})]})]})]}),W=()=>{const{user:n,setUser:o,sessionToken:r}=e.useContext(f),c=a(),l=n?.id||c.state?.id,d=i(),[u,p]=e.useState({userAnalysis:null,streakData:null,topicAnalysis:[],questionAttempts:[],questions:[],lastQuizAttempts:[]}),[h,y]=e.useState({userAnalysis:!0,streakData:!0,topicAnalysis:!0,questionAttempts:!0,questions:!0,lastQuizAttempts:!0}),[x,j]=e.useState({userAnalysis:null,streakData:null,topicAnalysis:null,questionAttempts:null,questions:null,lastQuizAttempts:null}),[w,v]=e.useState(!1),N=e.useCallback(e=>{if(!e||!Array.isArray(e)||0===e.length)return{best:null,worst:null};const t=e.filter(e=>e.total_answered>0&&void 0!==e.total_correct);if(0===t.length)return{best:null,worst:null};const s=t.map(e=>({...e,accuracy:e.total_correct/e.total_answered*100})).sort((e,t)=>t.accuracy-e.accuracy);return{best:s[0],worst:s[s.length-1]}},[]),q=async(e,t={})=>{if(!n||!r)throw new Error("Not authenticated");const i=e+(e.includes("?")?"&":"?")+`username=${encodeURIComponent(n.username)}&sessionToken=${encodeURIComponent(r)}`;try{return await s.get(i,t)}catch(a){if(a.response&&401===a.response.status)return o(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw a}},S=e.useCallback(async()=>{y(e=>({...e,userAnalysis:!0})),j(e=>({...e,userAnalysis:null}));try{const e=Date.now(),t=await q(`${g}/user-analysis/${l}?_=${e}`);p(e=>({...e,userAnalysis:t.data}))}catch(e){j(e=>({...e,userAnalysis:"Failed to load user analysis."}))}finally{y(e=>({...e,userAnalysis:!1}))}},[l,q]),_=e.useCallback(async()=>{y(e=>({...e,streakData:!0})),j(e=>({...e,streakData:null}));try{const e=Date.now(),t=await q(`${g}/user-streaks/${l}?_=${e}`);p(e=>({...e,streakData:t.data}))}catch(e){j(e=>({...e,streakData:"Failed to load streak data."}))}finally{y(e=>({...e,streakData:!1}))}},[l,q]),k=e.useCallback(async()=>{y(e=>({...e,topicAnalysis:!0})),j(e=>({...e,topicAnalysis:null}));try{const e=Date.now(),t=await q(`${g}/topic-analysis/user/${l}?_=${e}`);p(e=>({...e,topicAnalysis:t.data||[]}))}catch(e){j(e=>({...e,topicAnalysis:"Failed to load topic analysis."}))}finally{y(e=>({...e,topicAnalysis:!1}))}},[l,q]),A=e.useCallback(async()=>{y(e=>({...e,questionAttempts:!0})),j(e=>({...e,questionAttempts:null}));try{const e=Date.now(),t=await q(`${g}/question-attempts/user/${l}?_=${e}`,{timeout:1e4});p(e=>({...e,questionAttempts:t.data||[]}))}catch(e){j(t=>({...t,questionAttempts:"ECONNABORTED"===e.code?"Request timed out. Please try again.":"Failed to load question attempts."}))}finally{y(e=>({...e,questionAttempts:!1}))}},[l,q]),C=e.useCallback(async()=>{y(e=>({...e,questions:!0})),j(e=>({...e,questions:null}));try{const e=Date.now(),t=await s.get(`${g}/api/all-questions?_=${e}`);p(e=>({...e,questions:t.data.questions||[]}))}catch(e){j(e=>({...e,questions:"Failed to load questions."}))}finally{y(e=>({...e,questions:!1}))}},[]),P=e.useCallback(async e=>{if(!e)return p(e=>({...e,lastQuizAttempts:[]})),y(e=>({...e,lastQuizAttempts:!1})),void j(e=>({...e,lastQuizAttempts:null}));y(e=>({...e,lastQuizAttempts:!0})),j(e=>({...e,lastQuizAttempts:null}));try{const t=await q(`${g}/question-attempts/session/${e}`);p(e=>({...e,lastQuizAttempts:t.data||[]}))}catch(t){j(e=>({...e,lastQuizAttempts:"Failed to load last quiz attempts."}))}finally{y(e=>({...e,lastQuizAttempts:!1}))}},[q]),T=e.useCallback(async()=>{if(!w){v(!0);try{await S(),await _(),await Promise.all([k(),A(),C()]);const e=(await q(`${g}/user-analysis/${l}?_=${Date.now()}`)).data;p(t=>({...t,userAnalysis:e})),e&&e.latest_quiz&&e.latest_quiz.id?await P(e.latest_quiz.id):(p(e=>({...e,lastQuizAttempts:[]})),y(e=>({...e,lastQuizAttempts:!1})),j(e=>({...e,lastQuizAttempts:null})))}catch(e){}finally{v(!1)}}},[S,_,k,A,C,P,l,w,q]);e.useEffect(()=>{l?setTimeout(()=>{T()},500):d("/")},[l,d]);const M=e.useCallback(()=>{w||T()},[T,w]),E=({message:e})=>t.jsxs("div",{className:"section-loader",children:[t.jsx("div",{className:"loader",style:{width:30,height:30,borderWidth:3}}),t.jsx("p",{style:{color:"#888",fontSize:"1rem",marginTop:8},children:e})]}),z=({error:e,onRetry:s,retryFunction:i})=>t.jsxs("div",{className:"error-screen",children:[t.jsx("p",{children:e}),t.jsx("button",{onClick:()=>{s(),i()},className:"retry-button",style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Retry"})]}),{best:L,worst:W}=N(u.topicAnalysis);return t.jsxs(t.Fragment,{children:[t.jsx(b,{}),t.jsx(m,{title:"Performance Analysis - Track Your SMLE Progress",description:"Comprehensive SMLE performance analysis with detailed statistics, topic-wise breakdown, and progress tracking. Monitor your strengths and weaknesses to improve your exam preparation.",keywords:"SMLE analysis, medical exam performance, SMLE progress tracking, medical quiz analytics, Saudi medical license analysis, performance statistics",url:"https://medquiz.vercel.app/analysis",structuredData:{"@context":"https://schema.org","@type":"WebPage",name:"SMLE Performance Analysis - Track Your Progress",description:"Comprehensive SMLE performance analysis with detailed statistics, topic-wise breakdown, and progress tracking. Monitor your strengths and weaknesses.",url:"https://medquiz.vercel.app/analysis",mainEntity:{"@type":"EducationalService",name:"SMLE Performance Analytics",description:"Detailed analysis of SMLE practice performance with topic-wise statistics and progress tracking",provider:{"@type":"Organization",name:"SQB"}}}}),t.jsxs("div",{className:"analysis-wrapper fade-in",children:[t.jsx("h2",{className:"screen-title",children:"Quiz Health Report"}),h.userAnalysis?t.jsx(E,{message:"Loading overall stats..."}):x.userAnalysis?t.jsx(z,{error:x.userAnalysis,onRetry:()=>j(e=>({...e,userAnalysis:null})),retryFunction:S}):t.jsxs(t.Fragment,{children:[t.jsx(R,{userAnalysis:u.userAnalysis}),t.jsx(O,{best:L,worst:W})]}),h.streakData?t.jsx(E,{message:"Loading streak info..."}):x.streakData?t.jsx(z,{error:x.streakData,onRetry:()=>j(e=>({...e,streakData:null})),retryFunction:_}):t.jsx(D,{streakData:u.streakData}),h.topicAnalysis?t.jsx(E,{message:"Loading topic analysis..."}):x.topicAnalysis?t.jsx(z,{error:x.topicAnalysis,onRetry:()=>j(e=>({...e,topicAnalysis:null})),retryFunction:k}):t.jsx(I,{topicAnalysis:u.topicAnalysis}),h.userAnalysis?t.jsx(E,{message:"Loading last quiz summary..."}):x.userAnalysis?null:t.jsx(B,{latest_quiz:u.userAnalysis?.latest_quiz}),h.lastQuizAttempts||h.questions?t.jsx(E,{message:"Loading last quiz questions..."}):x.lastQuizAttempts||x.questions?t.jsx(z,{error:x.lastQuizAttempts||x.questions,onRetry:()=>{j(e=>({...e,lastQuizAttempts:null,questions:null}))},retryFunction:()=>{C(),u.userAnalysis?.latest_quiz?.id&&P(u.userAnalysis.latest_quiz.id)}}):t.jsx(F,{questionAttempts:u.lastQuizAttempts,questions:u.questions,latestQuiz:u.userAnalysis?.latest_quiz}),t.jsxs("div",{className:"button-bar",children:[t.jsx("button",{onClick:()=>d("/wrong-questions"),className:"secondary-button",children:"📚 Review Wrong Questions"}),t.jsx("button",{onClick:M,className:"secondary-button",disabled:w,children:w?"🔄 Refreshing...":"🔄 Refresh Data"}),t.jsx("button",{onClick:()=>d("/quizs",{state:{id:l}}),className:"primary-button",children:"Take Another Quiz"})]})]})]})},H=()=>{const a=i(),{user:n,sessionToken:o,setUser:r}=e.useContext(f),[c,l]=e.useState([]),[d,u]=e.useState(!0),[p,h]=e.useState(null),[y,x]=e.useState(!1),[j,w]=e.useState(""),[v,N]=e.useState({}),[q,S]=e.useState(""),[_,k]=e.useState(0),[A,C]=e.useState(0),[P,T]=e.useState(!0),M=e.useCallback(async(e,t={})=>{if(!n||!o)throw new Error("Not authenticated");const i=e+(e.includes("?")?"&":"?")+`username=${encodeURIComponent(n.username)}&sessionToken=${encodeURIComponent(o)}`;try{return await s.get(i,t)}catch(a){if(a.response&&401===a.response.status)return r(null,null),localStorage.clear(),void(window.location.href="/login?session=expired");throw a}},[n,o,r]),E=e.useCallback(async(e=0,t=!1)=>{if(n?.id)try{h(null),0===e&&u(!0);const s=await M(`${g}/wrong-questions/user/${n.id}?limit=20&offset=${20*e}`),{wrongQuestions:i,total:a}=s.data;l(t?e=>[...e,...i]:i),C(a),T(20*(e+1)<a),k(e)}catch(s){h("Failed to load wrong questions")}finally{u(!1)}},[n?.id,20,M]);e.useEffect(()=>{E(0,!1)},[E]);const z=e.useCallback(async(e,t,i,a)=>{S(e),w(""),N(e=>({...e,[a]:!0}));try{const a=await s.post(`${g}/ai-analysis`,{question:e,selected_answer:t,correct_option:i});w(a.data.answer||"No explanation received.")}catch(n){w("Failed to get AI analysis.")}finally{N(e=>({...e,[a]:!1})),x(!0)}},[]),L=e.useCallback(()=>{x(!1),w(""),S("")},[]),R=e.useCallback(()=>{P&&!d&&E(_+1,!0)},[P,d,_,E]);return t.jsxs(t.Fragment,{children:[t.jsx(b,{}),t.jsx(m,{title:"Wrong Questions Review - Improve Your SMLE Performance",description:"Review all questions you answered incorrectly with AI-powered explanations to improve your SMLE exam preparation and performance.",keywords:"SMLE wrong questions, medical exam mistakes, SMLE improvement, medical quiz review, wrong answers analysis, SMLE study help",url:"https://medquiz.vercel.app/wrong-questions",structuredData:{"@context":"https://schema.org","@type":"WebPage",name:"Wrong Questions Review - SMLE Study Tool",description:"Review and analyze all the questions you answered incorrectly to improve your SMLE performance.",url:"https://medquiz.vercel.app/wrong-questions"}}),t.jsxs("div",{className:"analysis-wrapper fade-in",children:[t.jsxs("div",{className:"screen-header",children:[t.jsx("h2",{className:"screen-title",children:"Wrong Questions Review"}),t.jsx("p",{className:"screen-subtitle",children:"Review and learn from your mistakes with AI-powered explanations"})]}),d&&0===c.length?t.jsxs("div",{className:"loading-state",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Loading your wrong questions..."})]}):p?t.jsxs("div",{className:"error-state",children:[t.jsxs("p",{children:["❌ ",p]}),t.jsx("button",{onClick:()=>E(0,!1),className:"primary-button",children:"Try Again"})]}):0===c.length?t.jsxs("div",{className:"no-data-state",children:[t.jsx("h3",{children:"🎉 Congratulations!"}),t.jsx("p",{children:"You haven't answered any questions incorrectly yet."}),t.jsx("button",{onClick:()=>a("/quizs"),className:"primary-button",children:"Take a Quiz"})]}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"stats-summary",children:[t.jsxs("div",{className:"stat-card",children:[t.jsx("h3",{children:"Total Wrong Answers"}),t.jsx("p",{className:"stat-number",children:A})]}),t.jsxs("div",{className:"stat-card",children:[t.jsx("h3",{children:"Questions Loaded"}),t.jsx("p",{className:"stat-number",children:c.length})]})]}),t.jsxs("section",{className:"streak-section",children:[t.jsx("h3",{className:"section-header",children:"Your Wrong Questions"}),t.jsx("div",{className:"questions-grid",children:c.map((e,s)=>t.jsxs("div",{className:"question-card",children:[t.jsx("div",{className:"question-header",children:t.jsxs("div",{className:"question-meta",children:[t.jsxs("span",{className:"type-badge",children:["📖 ",e.question_type]}),t.jsxs("span",{className:"source-badge",children:["📚 ",e.source||"general"]}),t.jsxs("span",{className:"date-badge",children:["📅 ",new Date(e.attempted_at).toLocaleDateString()]})]})}),t.jsxs("div",{className:"question-content",children:[t.jsx("div",{className:"question-text",children:e.question_text}),t.jsxs("div",{className:"answers-section",children:[t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label wrong",children:"Your Answer:"}),t.jsx("span",{className:"answer-text wrong",children:e.selected_option})]}),t.jsxs("div",{className:"answer-row",children:[t.jsx("span",{className:"answer-label correct",children:"Correct Answer:"}),t.jsx("span",{className:"answer-text correct",children:e.correct_option})]})]}),t.jsx("div",{className:"question-actions",children:t.jsx("button",{onClick:()=>z(e.question_text,e.selected_option,e.correct_option,e.id),className:"see-more-button",disabled:v[e.id],children:v[e.id]?"Loading...":"🔍 See More"})})]})]},e.id||s))}),P&&t.jsx("div",{className:"load-more-container",children:t.jsx("button",{onClick:R,className:"load-more-button",disabled:d,children:d?"Loading...":`Load More (${Math.min(20,A-c.length)} remaining)`})})]})]}),y&&t.jsx("div",{className:"modal-overlay",onClick:L,children:t.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[t.jsx("h3",{className:"section-header",children:"🧠 AI Analysis"}),""===j&&""!==q?t.jsxs("div",{className:"loading-state",children:[t.jsx("p",{children:"Analyzing:"}),t.jsx("p",{children:t.jsxs("strong",{children:['"',q,'"']})}),t.jsx("div",{className:"spinner"}),t.jsx("p",{className:"loading-subtext",children:"Please wait..."})]}):t.jsx("div",{className:"analysis-result",children:t.jsx("p",{children:j})}),""!==j&&t.jsx("button",{className:"close-button",onClick:L,children:"Close"})]})})]})]})},$=()=>{const e=i();return t.jsxs("div",{className:"admin-page-wrapper",children:[t.jsx(N,{}),t.jsxs("div",{className:"admin-container",children:[t.jsxs("div",{className:"admin-grid",children:[t.jsxs("div",{className:"admin-card",children:[t.jsx("div",{className:"admin-card-icon",children:"👤"}),t.jsx("h3",{children:"User Management"}),t.jsx("p",{children:"Add new user accounts and manage existing users"}),t.jsx("button",{className:"admin-button",onClick:()=>e("/ADD_ACCOUNT"),children:"Manage Users"})]}),t.jsxs("div",{className:"admin-card",children:[t.jsx("div",{className:"admin-card-icon",children:"❓"}),t.jsx("h3",{children:"Question Bank"}),t.jsx("p",{children:"Add new questions and manage the question database"}),t.jsx("button",{className:"admin-button",onClick:()=>e("/ADDQ"),children:"Add Questions"})]}),t.jsxs("div",{className:"admin-card",children:[t.jsx("div",{className:"admin-card-icon",children:"📚"}),t.jsx("h3",{children:"Question Library"}),t.jsx("p",{children:"View and browse all questions in the database"}),t.jsx("button",{className:"admin-button",onClick:()=>e("/Bank"),children:"View All Questions"})]})]}),t.jsx("div",{className:"admin-stats",children:t.jsxs("div",{className:"stat-card",children:[t.jsx("h4",{children:"Quick Stats"}),t.jsx("p",{children:"• Manage user accounts and subscriptions"}),t.jsx("p",{children:"• Add new medical questions"}),t.jsx("p",{children:"• Monitor platform performance"})]})})]})]})},Q=()=>{const[i,a]=e.useState([]),[n,o]=e.useState([]),[r,c]=e.useState(""),[l,d]=e.useState(null),[u,p]=e.useState({question_text:"",option1:"",option2:"",option3:"",option4:"",question_type:"",correct_option:"",source:""}),[h,m]=e.useState(!0),[y,x]=e.useState(""),[f,j]=e.useState(0);e.useEffect(()=>{b()},[]);const b=async()=>{try{const e=await s.get(`${g}/api/all-questions`);a(e.data.questions),o(e.data.questions),m(!1)}catch(e){m(!1)}};e.useEffect(()=>{if(r.trim()){const e=n.filter(e=>e.question_text.toLowerCase().includes(r.toLowerCase()));a(e)}else a(n);j(0)},[r,n]);const w=e=>{const{name:t,value:s}=e.target;p(e=>({...e,[t]:s}))},v=()=>{d(null),p({question_text:"",option1:"",option2:"",option3:"",option4:"",question_type:"",correct_option:"",source:""})},N=i[f];return f<i.length-1&&i[f+1],t.jsxs("div",{className:"app-container",children:[t.jsx("h1",{className:"title",children:"Question Bank"}),h?t.jsxs("div",{className:"loading-screen",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Loading questions, please wait..."})]}):t.jsxs(t.Fragment,{children:[y&&t.jsx("div",{className:"success-message",children:y}),t.jsx("div",{className:"search-bar",children:t.jsx("input",{type:"text",placeholder:"Search questions...",value:r,onChange:e=>c(e.target.value),className:"search-input"})}),t.jsx("div",{className:"question-list",children:0===i.length?t.jsx("p",{children:"No questions found."}):t.jsxs("div",{className:"card-wrapper",children:[t.jsx("div",{className:"question-card",children:l===N?.id?t.jsxs("div",{className:"edit-form",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Question Text:"}),t.jsx("textarea",{name:"question_text",value:u.question_text,onChange:w,rows:"3"})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Options:"}),t.jsx("input",{name:"option1",value:u.option1,onChange:w}),t.jsx("input",{name:"option2",value:u.option2,onChange:w}),t.jsx("input",{name:"option3",value:u.option3,onChange:w}),t.jsx("input",{name:"option4",value:u.option4,onChange:w})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Question Type:"}),t.jsxs("select",{name:"question_type",value:u.question_type,onChange:w,children:[t.jsx("option",{value:"",children:"Select Type"}),["pediatric","obstetrics and gynecology","medicine","surgery"].map((e,s)=>t.jsx("option",{value:e,children:e},s))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Correct Answer:"}),t.jsxs("select",{name:"correct_option",value:u.correct_option,onChange:w,children:[t.jsx("option",{value:"",children:"Select Correct Option"}),[u.option1,u.option2,u.option3,u.option4].map((e,s)=>t.jsx("option",{value:e,children:e},s))]})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{children:"Source:"}),t.jsx("input",{type:"text",name:"source",value:u.source,onChange:w,placeholder:"e.g., NBME, UWorld, Kaplan..."})]}),t.jsxs("div",{className:"button-group",children:[t.jsx("button",{className:"quiz-button",onClick:async()=>{try{const e=await s.put(`${g}/questions/${l}`,u);a(t=>t.map(t=>t.id===l?e.data.question:t)),o(t=>t.map(t=>t.id===l?e.data.question:t)),v(),x("✅ Question updated successfully!"),setTimeout(()=>x(""),3e3)}catch(e){}},children:"Save"}),t.jsx("button",{className:"analysis-button",onClick:v,children:"Cancel"})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("p",{className:"question-text",children:N.question_text}),t.jsxs("div",{className:"options",children:[t.jsxs("p",{children:["1. ",N.option1]}),t.jsxs("p",{children:["2. ",N.option2]}),t.jsxs("p",{children:["3. ",N.option3]}),t.jsxs("p",{children:["4. ",N.option4]})]}),t.jsxs("p",{className:"correct-answer",children:[t.jsx("strong",{children:"Answer:"})," ",N.correct_option]}),t.jsxs("p",{className:"question-type",children:[t.jsx("strong",{children:"Type:"})," ",N.question_type||"N/A"]}),t.jsxs("p",{className:"question-source",children:[t.jsx("strong",{children:"Source:"})," ",N.source||"N/A"]}),t.jsx("button",{className:"quiz-button",onClick:()=>{return d((e=N).id),void p({question_text:e.question_text,option1:e.option1,option2:e.option2,option3:e.option3,option4:e.option4,question_type:e.question_type||"",correct_option:e.correct_option,source:e.source||""});var e},children:"Edit"})]})}),t.jsxs("div",{className:"navigation-buttons",children:[t.jsx("button",{className:"quiz-button",disabled:0===f,onClick:()=>{f>0&&j(f-1)},children:"Previous"}),t.jsxs("span",{children:[f+1," / ",i.length]}),t.jsx("button",{className:"quiz-button",disabled:f===i.length-1,onClick:()=>{f<i.length-1&&j(f+1)},children:"Next"})]})]})})]})]})},U=()=>(e.useEffect(()=>{try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(e){}},[]),t.jsx("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":"ca-pub-9286976335875618","data-ad-format":"auto","data-full-width-responsive":"true"})),G=()=>{const s=a(),n=i(),{id:o,answers:r,questions:c,duration:l,types:d,source:u}=s.state||{};if(e.useEffect(()=>{const e=document.createElement("script");return e.async=!0,e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9286976335875618",e.crossOrigin="anonymous",document.head.appendChild(e),()=>{const t=document.querySelector(`script[src="${e.src}"]`);t&&document.head.removeChild(t)}},[]),!r||!c)return t.jsxs("div",{className:"error-screen",children:[t.jsx("h2",{children:"Error"}),t.jsx("p",{children:"No quiz data found. Please complete the quiz first."}),t.jsx("button",{onClick:()=>n(-1),className:"primary-button",children:"Go Back"})]});const p=r.length,h=r.filter(e=>e.isCorrect).length,m=(h/p*100).toFixed(2),g=l||60,y=(g/p).toFixed(2),x={total_quizzes:1,avg_accuracy:m,total_questions_answered:p,total_correct_answers:h,total_duration:g,avg_duration:g,latest_quiz:{id:1,total_questions:p,correct_answers:h,quiz_accuracy:m,duration:g,avg_time_per_question:y,source:u||"general",topics_covered:d?d.split(","):[f]}},f=d||"surgery",j={};r.forEach((e,t)=>{const s=c[t],i=s?.question_type||f;j[i]||(j[i]={total:0,correct:0}),j[i].total+=1,e.isCorrect&&(j[i].correct+=1)});const b=Object.keys(j).filter(e=>e===f).map(e=>({question_type:e,total_answered:j[e].total,total_correct:j[e].correct,accuracy:(j[e].correct/j[e].total*100).toFixed(2),avg_time:y})),w=r.map((e,t)=>{const s=c[t];return{id:s.id,question_id:s.id,selected_option:e.selected,is_correct:e.isCorrect,attempted_at:(new Date).toISOString(),quiz_session_id:1}});return t.jsxs("div",{className:"analysis-wrapper fade-in",children:[t.jsxs("div",{className:"trial-analysis-header",children:[t.jsx("h2",{className:"screen-title",children:"🎯 Free Trial Analysis"}),t.jsxs("div",{className:"trial-analysis-subtitle",children:[t.jsxs("p",{children:["You've completed a sample quiz with ",p," questions!"]}),t.jsx("p",{children:"Here's your performance breakdown from the trial experience."})]})]}),t.jsx("div",{className:"trial-notice-analysis",children:t.jsxs("div",{className:"trial-notice-content",children:[t.jsx("span",{className:"trial-emoji",children:"🎯"}),t.jsxs("div",{className:"trial-text-content",children:[t.jsx("h4",{children:"Free Trial Experience"}),t.jsx("p",{children:"You've just experienced a sample of our comprehensive SMLE question bank. With a full subscription, you'll get access to 8,000+ questions, detailed analytics, and personalized study recommendations."})]})]})}),t.jsx(R,{userAnalysis:x}),t.jsx(D,{streakData:{current_streak:1,longest_streak:3}}),t.jsx(I,{topicAnalysis:b}),t.jsx(B,{latest_quiz:x.latest_quiz}),t.jsx(F,{questionAttempts:w,questions:c,latestQuiz:x.latest_quiz,isTrial:!0}),t.jsxs("div",{className:"trial-benefits",children:[t.jsx("h4",{children:"🚀 What You Get With Full Access:"}),t.jsxs("ul",{children:[t.jsx("li",{children:"✅ Access to 8,000+ SMLE questions"}),t.jsx("li",{children:"✅ Detailed performance analytics"}),t.jsx("li",{children:"✅ Topic-wise practice sessions"}),t.jsx("li",{children:"✅ Wrong questions review system"}),t.jsx("li",{children:"✅ Progress tracking and streaks"}),t.jsx("li",{children:"✅ Personalized study recommendations"})]})]}),t.jsx("div",{className:"trial-actions-section",children:t.jsxs("div",{className:"trial-actions-grid",children:[t.jsx("button",{onClick:()=>{n("/payment")},className:"trial-action-btn subscribe",children:"🚀 Subscribe Now - Full Access"}),t.jsx("button",{onClick:()=>{window.location.href="mailto:support@medquiz.com?subject=Free Trial Analysis Inquiry&body=Hi, I completed the free trial and viewed the analysis. I would like to know more about the full version features."},className:"trial-action-btn contact",children:"📧 Contact Us"})]})}),t.jsx(U,{})]})},V=[{id:"6271",question_text:"A 40-year-old man with a history of recurrent painful attacks affecting the right big toe, was diagnosed with gout and started on allopurinol. He is also a known case of psoriasis for several years. He presented to the clinic with recurrent joint pain affecting the right big toe, left ankle, and bilateral knees. He is using allopurinol regularly as prescribed but has no improvement in his joint pain. Examinations revealed he has active arthritis at the left ankle and knee joints bilaterally (see lab results). Which of the following is the most likely cause for his joint pain?",option1:"Active pseudogout arthritis.",option2:"Active gout arthritis.",option3:"Psoriatic arthritis.",option4:"Osteoarthritis.",question_type:"medicine",correct_option:"Psoriatic arthritis.",source:"GameBoy"},{id:"6272",question_text:"A 28-year-old woman with systemic lupus erythematosus for 2 years on hydroxychloroquine 200 mg/day, prednisone 5 mg/day, and azathioprine 100 mg/day presented to the Emergency Room with sudden onset of lower limb weakness and urinary incontinence. Examination revealed she has paraplegia and hyperreflexia (see lab results). Which of the following is the most appropriate test to be done immediately?",option1:"Lumbar puncture, MRI brain",option2:"Lumbar puncture, CT brain",option3:"Lumbar puncture, MRI spinal cord",option4:"Lumbar puncture, MRI, MRA, and MRV of the brain",question_type:"medicine",correct_option:"Lumbar puncture, MRI spinal cord",source:"GameBoy"},{id:"6273",question_text:"A 50-year-old man is complaining of pain affecting the wrist joints bilaterally, second and third proximal interphalangeal joints, and right knee joint for the last 4 months. His examination revealed active arthritis at both wrists and second and third proximal interphalangeal joints (see lab results). Which of the following is the most appropriate treatment?",option1:"Methotrexate",option2:"Methotrexate and sulfasalazine",option3:"Methotrexate and hydroxychloroquine",option4:"Methotrexate, hydroxychloroquine, and prednisone",question_type:"medicine",correct_option:"Methotrexate, hydroxychloroquine, and prednisone",source:"GameBoy"},{id:"6274",question_text:"A 30-year-old woman with systemic lupus erythematosus is evaluated for right hip pain that started 3 weeks ago and occurs at night and with walking. Her current medications are azathioprine, hydroxychloroquine, prednisolone, and lisinopril for the last 5 years. Her examination was normal except for pain on internal rotation of the right hip. Laboratory tests including pelvic and left hip radiographs were normal. Which of the following is the most likely cause of hip pain?",option1:"Active lupus arthritis",option2:"Septic arthritis affecting right hip",option3:"Avascular necrosis affecting right hip",option4:"Degenerative changes affecting right hip",question_type:"medicine",correct_option:"Avascular necrosis affecting right hip",source:"GameBoy"},{id:"6275",question_text:"A 60-year-old man complaining of right knee pain for several years that has increased over the last few months. He also has noticed frequent knee clicks. A diagnosis of osteoarthritis is suspected. Which of the following is the most appropriate to confirm the diagnosis?",option1:"Bilateral knee X-rays.",option2:"MRI of the right knee.",option3:"No further investigation.",option4:"Arthroscopy for the right knee.",question_type:"medicine",correct_option:"No further investigation.",source:"GameBoy"},{id:"6276",question_text:"A 52-year-old man with rheumatoid arthritis for 12 years. His current treatment consists of methotrexate 15 mg weekly and adalimumab 40 mg/2 weeks. He presented to the clinic complaining of fever and shortness of breath for 1 week. His chest examination revealed coarse crackles over the lower part of the right lung (see lab results). Which of the following is the most appropriate action to be taken on this visit?",option1:"Hold adalimumab and start antibiotics",option2:"Hold methotrexate and start antibiotics",option3:"Hold his current treatment and start antibiotics",option4:"Continue his current treatment and start antibiotics",question_type:"medicine",correct_option:"Hold his current treatment and start antibiotics",source:"GameBoy"},{id:"6277",question_text:"A 30-year-old man presented to the Emergency Department with an acute monoarthritis where joint aspiration was performed. Based on the presence of crystals in the synovial fluid, he was diagnosed with gout. Which of the following is the most likely type of the crystals seen?",option1:"Needle-shaped, negatively birefringent",option2:"Needle-shaped, weakly positively birefringent",option3:"Rhomboidal-shaped, negatively birefringent",option4:"Rhomboidal-shaped, weakly positively birefringent",question_type:"medicine",correct_option:"Needle-shaped, negatively birefringent",source:"GameBoy"},{id:"6278",question_text:"A 30-year-old woman with a diagnosis of systemic lupus erythematosus who was maintained on mycophenolate mofetil 1 gm/day, hydroxychloroquine 200 mg/day, and prednisone 5 mg/day for the last 1 year. She has had inactive disease for more than 6 months. She is planning to get pregnant (see lab results). Which of the following is the most appropriate action at this time?",option1:"Discontinue prednisone and start cyclosporine",option2:"Discontinue hydroxychloroquine and start quinacrine",option3:"Discontinue mycophenolate mofetil and start azathioprine",option4:"Discontinue mycophenolate mofetil and start methotrexate",question_type:"medicine",correct_option:"Discontinue mycophenolate mofetil and start azathioprine",source:"GameBoy"},{id:"6279",question_text:"A 61-year-old woman is evaluated for a left pulmonary nodule that was discovered incidentally 2 months ago. She is currently asymptomatic and has not had shortness of breath, fever, chills, weight loss, or night sweats. Medical history is otherwise unremarkable, and she takes no medications. She never smoked. Examination revealed no cervical or supraclavicular lymphadenopathy, and the lungs are clear to auscultation (see report). CT scan chest: Showed an 8 mm left lung nodule. Which of the following is the most appropriate next step in management?",option1:"PET/CT scan",option2:"Bronchoalveolar lavage",option3:"Transthoracic lung biopsy",option4:"Observation and regular follow-up",question_type:"medicine",correct_option:"Observation and regular follow-up",source:"GameBoy"},{id:"6280",question_text:"A 63-year-old woman presented with exertional dyspnea for 8 months. She was diagnosed with COPD 3 years ago and has had 4 exacerbations in the last year. She completed pulmonary rehabilitation and quit smoking 2 years ago. Medications include long-acting B2 agonist, inhaled glucocorticoid, roflumilast, and albuterol as needed. Examination revealed no jugular venous distention; decreased breath sounds, a loud pulmonary component of S1 (see lab results and reports). Chest radiograph: Normal. Echocardiogram: Ejection fraction of 60%, no valvular or wall motion abnormalities, and estimated mean pulmonary artery pressure is 55 mmHg. Which of the following is the most appropriate treatment?",option1:"Daily prednisone",option2:"Long-term oxygen therapy",option3:"Overnight pulse oximetry",option4:"Repeat pulmonary rehabilitation",question_type:"medicine",correct_option:"Long-term oxygen therapy",source:"GameBoy"},{id:"7933",question_text:"A 70-year-old man is brought to the clinic with an acute confusional state. On examination, he has postural hypotension and dry mucus membranes. Test Result Normal Value Calcium 3.41 2.15-2.62 mmol/L Which of the following is the most appropriate initial treatment?",option1:"I.V. 0.9% sodium chloride",option2:"I.V. sodium pamidronate",option3:"Oral prednisolone",option4:"I.V. furosemide",question_type:"medicine",correct_option:"I.V. 0.9% sodium chloride",source:"Midgard"},{id:"7934",question_text:"A 67-year-old man is brought to the Emergency Department by his family with confusion and a decreased level of consciousness. The family reported his being feverish and feeling unwell for 2 days that was also associated with diarrhea and poor oral intake. The patient has bronchial asthma, hypertension, and an old myocardial infarction. He has not been able to take his regular medications for 2 days due to the acute illness. On examination, the JVP is not visible, heart sounds are normal, no cardiac murmurs, and lungs are clear with no rhonchi or crepitation. The patient's extremities are cold and peripheral pulses feeble (see report). Blood pressure 83/45 mmHg Heart rate 120 /min (regular) Respiratory rate 20 /min Oxygen saturation 95% (room air) ECG: Sinus tachycardia and evidence of an old inferior myocardial infarction. Which of the following is the most appropriate next step in management?",option1:"IV boluses of normal saline",option2:"Intravenous beta blockers",option3:"Nasogastric tube feeding",option4:"Dopamine infusion",question_type:"medicine",correct_option:"IV boluses of normal saline",source:"Midgard"},{id:"7935",question_text:"A 68-year-old woman with history of heart failure, stroke and diabetes, admitted for hysterectomy. She was kept on normal saline due to poor oral intake. 2 days post-operation, the nurse noticed the patient pulse oximetry was dropping with respiratory distress. On lung auscultation, there was bilateral basal crepitations. Which of the following is the best action to prevent this complication?",option1:"Cardiology and pulmonary consultation",option2:"Oxygen by nasal cannula at 2 L/min",option3:"Furosemide 40 mg iv on post-op day 1",option4:"Daily reassessment of fluid status",question_type:"medicine",correct_option:"Daily reassessment of fluid status",source:"Midgard"},{id:"7936",question_text:"A 78-year-old man presents with a 10-day history of intermittent colicky abdominal pain. The pain is low, central and seems to be worse after eating. He has no associated fever or vomiting but does feel nauseated when the pain is present. He says that prior to this episode he had hard stools once or twice a week that were difficult to pass. For the past several days, he has had only watery stools, several times a day. On examination, there is fullness in his left lower quadrant with nonspecific tenderness diffusely and no guarding or rebound. A urine dipstick is normal. Which of the following is the most likely diagnosis?",option1:"Acute colitis",option2:"Constipation",option3:"Ureteric stone",option4:"Urinary tract infection",question_type:"medicine",correct_option:"Constipation",source:"Midgard"},{id:"7937",question_text:"Which of the following is the best exercise to improve the function of a 68-year-old woman?",option1:"Walking",option2:"Swimming",option3:"Resistance training",option4:"Stationary bicycling",question_type:"medicine",correct_option:"Resistance training",source:"Midgard"},{id:"7938",question_text:"A 72-year-old man complains of difficulty in getting up from the chair for the last 3 months. History reveals he has controlled type 2 diabetes and long standing hypertension. Which of the following is the most leading type of injury in this patient?",option1:"Road traffic accidents",option2:"Fire-related injuries",option3:"Gunshot wounds",option4:"Falls",question_type:"medicine",correct_option:"Falls",source:"Midgard"},{id:"7939",question_text:"A 65-year-old man who is asymptomatic and has no known allergies is seen for a general examination. What is the best approach for pneumococcus immunization?",option1:"PPSV23",option2:"PCV13 followed by PPSV23",option3:"PPSV23 followed by PCV13",option4:"No evidence supports vaccinating this patient",question_type:"medicine",correct_option:"PCV13 followed by PPSV23",source:"Midgard"},{id:"7940",question_text:"A 64-year-old man presents to the clinic after having first episode of right knee pain for 2 weeks duration. He asks for a medicine to relieve his pain. He does not have any other symptoms apart from epigastric burning. He has no history of injury to the knee. Examination of knee is normal. Which is the most appropriate analgesic for this patient at this stage?",option1:"Aspirin",option2:"Codeine",option3:"Ibuprofen",option4:"Paracetamol",question_type:"medicine",correct_option:"Paracetamol",source:"Midgard"},{id:"7941",question_text:"An 81-year-old woman reports low back pain that began after a forceful coughing episode. Lumbar radiographs reveal features of a lumbar compression fracture. Which of the following is the most appropriate initial step in her care?",option1:"Prescribe nasal calcitonin",option2:"Prescribe acetaminophen",option3:"Admit for vertebroplasty",option4:"Infuse zoledronate",question_type:"medicine",correct_option:"Prescribe acetaminophen",source:"Midgard"},{id:"7942",question_text:"A 77-year-old woman with stage 3 chronic kidney disease and pain from osteoarthritis of the first carpometacarpal joint. Which of the following is the best initial treatment for her pain?",option1:"Tendon-release surgery",option2:"Splinting and occupational therapy",option3:"Ibuprofen 800mg 3 times daily with food",option4:"Glucocorticoid injection into the first carpometacarpal joint",question_type:"medicine",correct_option:"Splinting and occupational therapy",source:"Midgard"},{id:"1378",question_text:"A 68-year-old woman with history of heart failure, stroke and diabetes, admitted for hysterectomy. She was kept on normal saline due to poor oral intake. 2 days post-operation, the nurse noted the patient pulse oxymetry was dropping with respiratory distress. On lung auscultation, there was bilateral basal crepitations. Which of the following is the best action to prevent this complication?",option1:"Cardiology and pulmonary consultation",option2:"Oxygen by nasal cannula at 2 L/min",option3:"Furosemide 40 mg iv on post-op day 1",option4:"Daily reassessment of fluid status",question_type:"medicine",correct_option:"Daily reassessment of fluid status",source:"general"},{id:"1379",question_text:"A 78-year-old man presents with a 10-day history of intermittent colicky abdominal pain. The pain is low, central and seems to be worse after eating. He has no associated fever or vomiting but does feel nauseated when the pain is present. He says that prior to this episode he had hard stools once or twice a week that were difficult to pass. For the past several days, he has had only watery stools, several times a day. On examination, there is fullness in his left lower quadrant with nonspecific tenderness diffusely and no guarding or rebound. A urine dipstick is normal. Which of the following is the most likely diagnosis?",option1:"Acute colitis",option2:"Constipation",option3:"Ureteric stone",option4:"Urinary tract infection",question_type:"medicine",correct_option:"Constipation",source:"general"},{id:"1380",question_text:"Which of the following is the best exercise to improve the function of a 68-year-old woman?",option1:"Walking",option2:"Swimming",option3:"Resistance training",option4:"Stationary bicycling",question_type:"medicine",correct_option:"Resistance training",source:"general"},{id:"1381",question_text:"A 72-year-old man complains of difficulty in getting up from the chair for the last 3 months. History reveals he has controlled type 2 diabetes and long standing hypertension. Which of the following is the most leading type of injury in this patient?",option1:"Road traffic accidents",option2:"Fire-related injuries",option3:"Gunshot wounds",option4:"Falls",question_type:"medicine",correct_option:"Falls",source:"general"},{id:"1382",question_text:"A 65-year-old man who is asymptomatic and has no known allergies is seen for a general examination. What is the best approach for pneumococcus immunization?",option1:"PPSV23",option2:"PCV13 followed by PPSV23",option3:"PPSV23 followed by PCV13",option4:"No evidence supports vaccinating this patient",question_type:"medicine",correct_option:"PCV13 followed by PPSV23",source:"general"},{id:"1383",question_text:"A 64-year-old man presents to the clinic after having first episode of right knee pain for 2 weeks duration. He asks for a medicine to relieve his pain. He does not have any other symptoms apart from epigastric burning. He has no history of injury to the knee. Examination of knee is normal. Which is the most appropriate analgesic for this patient at this stage?",option1:"Aspirin",option2:"Codeine",option3:"Ibuprofen",option4:"Paracetamol",question_type:"medicine",correct_option:"Paracetamol",source:"general"},{id:"1384",question_text:"An 81-year-old woman reports low back pain that began after a forceful coughing episode. Lumbar radiographs reveal features of a lumbar compression fracture. Which of the following is the most appropriate initial step in her care?",option1:"Prescribe nasal calcitonin",option2:"Prescribe acetaminophen",option3:"Admit for vertebroplasty",option4:"Infuse zoledronate",question_type:"medicine",correct_option:"Prescribe acetaminophen",source:"general"},{id:"1385",question_text:"A 77-year-old woman with stage 3 chronic kidney disease and pain from osteoarthritis of the first carpometacarpal joint. Which of the following is the best initial treatment for her pain?",option1:"Tendon-release surgery",option2:"Splinting and occupational therapy",option3:"Ibuprofen 800mg 3 times daily with food",option4:"Glucocorticoid injection into the first carpometacarpal joint",question_type:"medicine",correct_option:"Splinting and occupational therapy",source:"general"},{id:"1386",question_text:"Which of the following physical maneuvers is most likely to assist the risk of future falls for a healthy 68-year-old man?",option1:"Test for nystagmus",option2:"Get-up-and-go test",option3:"Test for pulsus paradoxus",option4:"Lumbar spine flexibility test",question_type:"medicine",correct_option:"Get-up-and-go test",source:"general"},{id:"1387",question_text:"A 75-year-old man with difficulty walking and left-sided leg weakness due to osteoarthritis of the hip. In which hand should a cane be used by this patient?",option1:"Left hand",option2:"Right hand",option3:"Either hand",option4:"Both hands simultaneously",question_type:"medicine",correct_option:"Right hand",source:"general"},{id:"5878",question_text:"A 27-year-old woman presented at full term at labor, she was having uncontrolled diabetes during this pregnancy. Which of the following neonatal complications will most likely increase?",option1:"Hyperglycemia",option2:"Low Hemoglobin",option3:"Low erythropoietin levels",option4:"Respiratory distress syndrome",question_type:"obstetrics and gynecology",correct_option:"Respiratory distress syndrome",source:"GameBoy"},{id:"5879",question_text:"A primipara presents 1 week after delivery. She is tearful, has spells of crying, and lacks appetite and sleep. Which of the following is the most likely diagnosis?",option1:"Anemia",option2:"Schizophrenia",option3:"Manic disorders",option4:"Postnatal depression",question_type:"obstetrics and gynecology",correct_option:"Postnatal depression",source:"GameBoy"},{id:"5880",question_text:"A 30-year-old Primigravida at 17 weeks of gestation is known to have epilepsy and is on valproic acid. She was concerned about the possible risks to her baby. Which of the following fetal abnormalities is markedly increased?",option1:"Oligohydramnios",option2:"Polyhydramnios",option3:"Neural tube defect",option4:"Non-immune hydrops",question_type:"obstetrics and gynecology",correct_option:"Neural tube defect",source:"GameBoy"},{id:"5881",question_text:"A 28-year-old Primigravida at 8 weeks of gestation is known to have chronic hypertension and presented to Antenatal Clinic. Which of the following antihypertensive medications is contraindicated?",option1:"Labetalol",option2:"Nifedipine",option3:"Lisinopril",option4:"Methyldopa",question_type:"obstetrics and gynecology",correct_option:"Lisinopril",source:"GameBoy"},{id:"5882",question_text:"A 28-year-old G4 P3 AO at 12 weeks of gestation with a prior history of preeclampsia and fetal growth restriction presented to the Antenatal Clinic. Which of the following will most likely reduce the risk of growth restriction and preeclampsia?",option1:"Aspirin",option2:"Progesterone",option3:"Multivitamins",option4:"Ferrous sulfate",question_type:"obstetrics and gynecology",correct_option:"Aspirin",source:"GameBoy"},{id:"5883",question_text:"A 22-year-old G2 PO Al at 13 weeks of gestation presented to the Antenatal Clinic. In her first pregnancy, she had a painless fetal passage at 22 weeks. Which of the following interventions is most recommended for the current pregnancy?",option1:"Aspirin",option2:"Folic acid",option3:"Cervical cerclage",option4:"Regular antenatal visits with no specific intervention",question_type:"obstetrics and gynecology",correct_option:"Cervical cerclage",source:"GameBoy"},{id:"5884",question_text:"A 30-year-old Primigravida is found to have hyperthyroidism during her pregnancy. Which of the following is the most contraindicated?",option1:"Propranolol",option2:"Methimazole",option3:"Thyroidectomy",option4:"Radioactive iodine",question_type:"obstetrics and gynecology",correct_option:"Radioactive iodine",source:"GameBoy"},{id:"5885",question_text:"A 28-year-old Primigravida presented to the Antenatal Clinic for an Ultrasound scan. Ultrasound: Single viable fetus with significant lower levels of amniotic fluid (oligohydramnios). Which of the following is the most likely cause?",option1:"Chorioangioma",option2:"Duodenal atresia",option3:"Diabetes mellitus",option4:"Placental insufficiency",question_type:"obstetrics and gynecology",correct_option:"Placental insufficiency",source:"GameBoy"},{id:"5886",question_text:"A 36-year-old presented to the Antenatal Clinic for an Ultrasound scan. Ultrasound: Single viable fetus with significant increased levels of amniotic fluid (polyhydramnios). Which of the following is the most likely cause?",option1:"Anencephaly",option2:"Post-term pregnancy",option3:"Posterior urethral valve",option4:"Maternal ingestion of NSAID",question_type:"obstetrics and gynecology",correct_option:"Anencephaly",source:"GameBoy"},{id:"5887",question_text:"A pregnant woman with prenatal diagnosis of Rhesus (Rh) alloimmunization had an ultrasound scan during follow-up. Which of the following is the most diagnostic sign?",option1:"Thin placenta",option2:"Fetal bradycardia",option3:"Fetal ascites with skin edema",option4:"Low fetal middle cerebral artery (MCA) Doppler peak systolic velocity",question_type:"obstetrics and gynecology",correct_option:"Fetal ascites with skin edema",source:"GameBoy"},{id:"6495",question_text:"A 28-year-old woman G3 P0020 at 5 weeks' gestation presents with vaginal bleeding associated with some blood clots that has started 3 hours ago. She had been diagnosed with cervical incompetence in her 2 prior second-trimester abortions. A history of dilation and curettage in her last abortion declared. On examination; the cervical os is open and no on-going bleeding. Which of the following is the most likely cause of her current diagnosis of vaginal bleeding?",option1:"Luteal phase defect",option2:"Asherman's syndrome",option3:"Cervical incompetence",option4:"Chromosomal abnormality",question_type:"obstetrics and gynecology",correct_option:"Chromosomal abnormality",source:"Midgard"},{id:"6496",question_text:"A 35-year-old pregnant woman at 34 weeks of gestation presented with labour pains. On physical examination, the cervix was 4 cm dilated. Cardiotocography was performed (see image), Blood pressure 135/88 mmHg Heart rate 89 /min Respiratory rate 18 /min Temperature 37.4Â° C Which of the following is the most likely diagnosis?",option1:"Placenta previa",option2:"Head compression",option3:"Umbilical cord compression",option4:"Uteroplacental insufficiency",question_type:"obstetrics and gynecology",correct_option:"Uteroplacental insufficiency",source:"Midgard"},{id:"6497",question_text:"A 21-year-old woman G2 P1001 presents to the Emergency Room with a severe lower abdominal pain for 1 day. Pain is dull and intermittent that last for 10-15 minutes and associated with nausea and vomiting. Examination confirms tenderness and guarding in the lower abdomen, it is more on right side and slight fullness in the right iliac fossa (see report). Blood pressure 90/60 mmHg Heart rate 110 /min Respiratory rate 13 /min Temperature 3t.6Â° C Pregnancy Test: Negative. Which of the following is the most likely diagnosis?",option1:"Acute cysts",option2:"Ovarian torsion",option3:"Acute appendicitis",option4:"Ectopic pregnancy",question_type:"obstetrics and gynecology",correct_option:"Ovarian torsion",source:"Midgard"},{id:"6498",question_text:"A 28-year-old woman is diagnosed with an ectopic pregnancy. Which of the following is the most likely predisposing factor?",option1:"Induction of ovulation",option2:"Previous tubal pregnancy",option3:"Pelvic inflammatory disease",option4:"Use of an intrauterine contraceptive device",question_type:"obstetrics and gynecology",correct_option:"Pelvic inflammatory disease",source:"Midgard"},{id:"6499",question_text:"A 33-year-old pregnant woman G4 P2012 at 38 weeks' gestation presented with a complaint of dizziness, light-headedness and fainting sensation especially in bed for 2 weeks duration (see lab results). Blood pressure 110/70 mmHg Heart rate 100 min Respiratory rate 24 /min Temperature 36.6Â° C Test Result Normal Values Hb 95 120-160 g/L WBC 9 4.5-10.5 x 109/L Platelet count 200 150-400 x 109/L Which of the following is the best management?",option1:"Blood transfusion",option2:"Refer to a neurologist",option3:"Avoid sleep on the back",option4:"ECG and echocardiography",question_type:"obstetrics and gynecology",correct_option:"Avoid sleep on the back",source:"Midgard"},{id:"6500",question_text:"A 25-year-old woman has delivered a boy. On inspection of the umbilical cord, a single artery was noticed. Which of the following is associated with the above finding?",option1:"African race",option2:"Maternal diabetes",option3:"Low foetal mortality",option4:"Major foetal malformation in 80%",question_type:"obstetrics and gynecology",correct_option:"Maternal diabetes",source:"Midgard"},{id:"6501",question_text:"A 23-year-old primigravida presented in labour. The midwife advised mediolateral episiotomy during the 2nd stage of labour. What is the advantage of a mediolateral episiotomy?",option1:"Easy repair",option2:"Less infection",option3:"Tighter introitus",option4:"Less anal extension",question_type:"obstetrics and gynecology",correct_option:"Less anal extension",source:"Midgard"},{id:"6502",question_text:"A 23-year-old G2 P1001 at 22 weeks' gestation presented with a complaint of her abdomen is larger than her previous pregnancy (see report). Ultrasound: Showed dizygotic twin pregnancy. Which of the following best described membranes and placenta of dizygotic twins?",option1:"Monochorionic and monoamniotic for conjoined twins",option2:"Monochorionic and diamniotic for the fetuses of same sex",option3:"Dichorionic and monoamniotic for the fetuses of same sex",option4:"Dichorionic and diamniotic regardless of the sex of the fetuses",question_type:"obstetrics and gynecology",correct_option:"Dichorionic and diamniotic regardless of the sex of the fetuses",source:"Midgard"},{id:"6503",question_text:"A 28-year-old woman G 4 P2012 immigrant presented to the Maternal Health Clinic at 20 weeks' gestation with a cough and night chills for the past month. The cough is productive and produces thick sputum. She had been prescribed treatment by a general practitioner for the cough and it had not responded to treatment. Patient nail beds and conjunctiva appeared pale and the cervical lymph nodes are palpable. Auscultation of the chest shows crepitation over the upper left lobe. She had received a BC vaccine as a child. A blood test is positive for interferon-gamma release assays. Blood pressure 110/t0 mmHg Heart rate 84 /min Respiratory rate 18 /min Temperature 3t.5Â° C oral Which of the following is the next best step in obtaining a definitive diagnosis?",option1:"Chest X-ray",option2:"Sputum culture",option3:"Tuberculin skin test",option4:"Sputum smear cytology",question_type:"obstetrics and gynecology",correct_option:"Sputum culture",source:"Midgard"},{id:"6504",question_text:"A 28-year-old woman with mild intermittent asthma presents to the Health Clinic at 24 weeks' gestation and says that her symptoms have worsened as the pregnancy progresses. Prior to the pregnancy, she had an occasional exacerbation of asthma and used only an albuterol inhaler for treatment as needed. However, she now complains of daily symptoms and once per week symptoms at night time. A forced expiratory volume in 1 second test shows 70% of normal. Which of the following medication regimen is now most appropriate?",option1:"Short-acting bronchodilators and oral glucocorticoids",option2:"Inhaled glucocorticoids and short-acting bronchodilators",option3:"Inhaled glucocorticoids and long-acting bronchodilators",option4:"Long acting beta2 agonist and inhaled glucocorticoids",question_type:"obstetrics and gynecology",correct_option:"Inhaled glucocorticoids and long-acting bronchodilators",source:"Midgard"},{id:"733",question_text:"A 28-year-old woman G3 P0020 at 5 weeks gestation presents with vaginal bleeding and clots. History of cervical incompetence and prior second-trimester losses. Cervix open, no ongoing bleeding. Most likely cause?",option1:"Luteal phase defect",option2:"Asherman's syndrome",option3:"Cervical incompetence",option4:"Chromosomal abnormality",question_type:"obstetrics and gynecology",correct_option:"Chromosomal abnormality",source:"general"},{id:"734",question_text:"A 35-week pregnant woman at 34 weeks gestation presents in labor. Cervix 4 cm dilated. CTG shows late decelerations. Most likely diagnosis?",option1:"Placenta previa",option2:"Head compression",option3:"Umbilical cord compression",option4:"Uteroplacental insufficiency",question_type:"obstetrics and gynecology",correct_option:"Uteroplacental insufficiency",source:"general"},{id:"736",question_text:"A 28-year-old woman diagnosed with ectopic pregnancy. Most likely predisposing factor?",option1:"Induction of ovulation",option2:"Previous tubal pregnancy",option3:"Pelvic inflammatory disease",option4:"Use of intrauterine contraceptive device",question_type:"obstetrics and gynecology",correct_option:"Pelvic inflammatory disease",source:"general"},{id:"737",question_text:"A 33-year-old pregnant woman G4 P2012 at 38 weeks presents with dizziness and light-headedness. Labs: Hb = 95 g/L. Most appropriate management?",option1:"Blood transfusion",option2:"Refer to neurologist",option3:"Avoid sleep on the back",option4:"ECG and echocardiography",question_type:"obstetrics and gynecology",correct_option:"Avoid sleep on the back",source:"general"},{id:"738",question_text:"A 25-year-old woman delivers a baby with single umbilical artery. Which is associated with this nding?",option1:"African race",option2:"Maternal diabetes",option3:"Low fetal mortality",option4:"Major fetal malformation in 80%",question_type:"obstetrics and gynecology",correct_option:"Maternal diabetes",source:"general"},{id:"739",question_text:"A 23-year-old primigravida undergoes mediolateral episiotomy during second stage of labor. What is the advantage of this type of episiotomy?",option1:"Easy repair",option2:"Less infection",option3:"Tighter introitus",option4:"Less anal extension",question_type:"obstetrics and gynecology",correct_option:"Less anal extension",source:"general"},{id:"740",question_text:"A 23-year-old G2 P1001 at 22 weeks presents with larger abdomen than previous pregnancy. Ultrasound confirms dizygotic twins. Which describes membranes and placenta?",option1:"Monochorionic and monoamniotic for conjoined twins",option2:"Monochorionic and diamniotic for same-sex twins",option3:"Dichorionic and monoamniotic for same-sex twins",option4:"Dichorionic and diamniotic regardless of sex",question_type:"obstetrics and gynecology",correct_option:"Dichorionic and diamniotic regardless of sex",source:"general"},{id:"741",question_text:"A 28-year-old immigrant woman at 20 weeks presents with cough, night chills, and pale conjunctiva. Sputum thick and productive. IGRA positive. Next best step for de nitive diagnosis?",option1:"Chest X-ray",option2:"Sputum culture",option3:"Tuberculin skin test",option4:"Sputum smear cytology",question_type:"obstetrics and gynecology",correct_option:"Sputum culture",source:"general"},{id:"742",question_text:"A 28-year-old woman with mild intermittent asthma reports worsening symptoms during pregnancy. Uses albuterol occasionally pre-pregnancy. Now has daily symptoms and weekly nocturnal episodes. FEV1 = 70%. Most appropriate medication regimen?",option1:"Short-acting bronchodilators and oral glucocorticoids",option2:"Inhaled glucocorticoids and short-acting bronchodilators",option3:"Inhaled glucocorticoids and long-acting bronchodilators",option4:"Long-acting beta2 agonist and inhaled glucocorticoids",question_type:"obstetrics and gynecology",correct_option:"Inhaled glucocorticoids and long-acting bronchodilators",source:"general"},{id:"743",question_text:"A 34-year-old multiparous woman at 28 weeks presents with cough, clear sputum, bilateral rhonchi, and allergies. Most appropriate initial diagnostic test?",option1:"Spirometry",option2:"Chest X-ray",option3:"Arterial blood gas levels",option4:"Hemoglobin estimation",question_type:"obstetrics and gynecology",correct_option:"Spirometry",source:"general"},{id:"993",question_text:"A 3-year-old girl presents to the Emergency Department with vaginal bleeding and pain. Her mother reports that she has been passing stools in her pants for 2 weeks despite being toilet trained. On examination, there is bruises on with blood staining labia majora. Which of the following is the most likely diagnosis?",option1:"Sexual abuse",option2:"Herpetic vaginitis",option3:"Precocious puberty",option4:"Gonorrheal vaginitis",question_type:"pediatric",correct_option:"Sexual abuse",source:"GameBoy"},{id:"1071",question_text:"A 14-year-old child presented to the clinic after being sexually abused 6 hours earlier. Genital examination confirmed anogenital erythema and mild bleeding vaginally, and labia majora was swollen and bruised. What is the most likely site of hymeneal tear that is suggestive of penile penetration?",option1:"2 o'clock",option2:"4 o'clock",option3:"6 o'clock",option4:"8 o'clock",question_type:"pediatric",correct_option:"6 o'clock",source:"GameBoy"},{id:"1121",question_text:"A pediatrician is called to attend a caesarean section delivery of 38 week's gestation baby. On delivery, the neonate does not cry immediately, appears cyanotic and floppy. After drying suctioning and stimulating the baby under the radiant warmer, the following evidence is recorded at 5 minutes. Heart rate 120 bpm, Breathing: Irregular, gasping, Reflex irritability: Coughs, and cries with stimulation, Activity: Arms and legs flexed, little movement, Appearance: Rosy with blue extremities. What is the most accurate Apgar score?",option1:"6",option2:"7",option3:"8",option4:"9",question_type:"pediatric",correct_option:"8",source:"GameBoy"},{id:"1137",question_text:"A 12-year-old obese girl brought by her mother, 5-month after her menarche with irregular menstrual bleeding and increased weight. She has mild acne. The patient was uncomfortable, agitated and unable to cooperate to physical examination. BMI 26 kg/mÂ². What is the most likely disorder to be considered in communicating with this patient?",option1:"Mood",option2:"Anxiety",option3:"Behavior",option4:"Substance use",question_type:"pediatric",correct_option:"Anxiety",source:"GameBoy"},{id:"2313",question_text:"According to Saudi vaccination program, which disease is effectively prevented in children?",option1:"Q-fever",option2:"Japanese encephalitis",option3:"Herpes encephalitis",option4:"Haemophilus influenza meningitis",question_type:"pediatric",correct_option:"Haemophilus influenza meningitis",source:"GameBoy"},{id:"2314",question_text:"Recommended vaccines for a 6-year-old in Saudi Arabia?",option1:"MMR, DTP, OPV",option2:"MMR, HBV, DTP, HAV",option3:"MMR, varicella, DTP, OPV",option4:"MMR, varicella, OPV, PCV",question_type:"pediatric",correct_option:"MMR, varicella, DTP, OPV",source:"GameBoy"},{id:"2315",question_text:"Newborn of HBsAg+ mother needs within 12 hours:",option1:"Hep B vaccine only",option2:"Hep B immunoglobulins only",option3:"Both vaccine and immunoglobulins",option4:"Test HBsAg first",question_type:"pediatric",correct_option:"Both vaccine and immunoglobulins",source:"GameBoy"},{id:"2316",question_text:"18-month-old on antibiotics for tonsillitis but improving. Vaccination decision?",option1:"Vaccinate as scheduled",option2:"Wait until antibiotics finished",option3:"Postpone OPV only",option4:"Skip DTP",question_type:"pediatric",correct_option:"Vaccinate as scheduled",source:"GameBoy"},{id:"2317",question_text:"14-year-old never had chickenpox or vaccine. Vaccination plan?",option1:"No vaccination",option2:"1 dose varicella",option3:"2 doses 4 weeks apart",option4:"3 doses at 0,1,6 months",question_type:"pediatric",correct_option:"2 doses 4 weeks apart",source:"GameBoy"},{id:"2318",question_text:"Most important food allergy to note before flu vaccine?",option1:"Chicken",option2:"Shellfish",option3:"Eggs",option4:"Nuts",question_type:"pediatric",correct_option:"Eggs",source:"GameBoy"},{id:"7176",question_text:"Which of the following measures would decrease the incidence of Sudden Infant Death Syndrome?",option1:"Pacifier at bedtime",option2:"Sleep in prone position",option3:"Soft sleeping mattress",option4:"Sleep position support device",question_type:"pediatric",correct_option:"Pacifier at bedtime",source:"Midgard"},{id:"7177",question_text:"Which of the following is the most common cause of dehydration in children?",option1:"Heat stroke",option2:"Food poisoning",option3:"Gastroenteritis",option4:"Drugs side effects",question_type:"pediatric",correct_option:"Gastroenteritis",source:"Midgard"},{id:"7178",question_text:"A 5-year-old child presents to Emergency Room with vomiting and diarrhea for 4 days. On examination, he looks dehydrated, hypoactive with sunken eyes, doughy skin and dry mucous membrane. The capillary refill is 4 seconds. Blood pressure 90/70 mmHg Heart rate 130 /min Respiratory rate 22 /min Temperature 36.6 Â°C Oxygen saturation 95 % Which of the following is the expected serum sodium level based on clinical finding?",option1:"Low",option2:"High",option3:"Normal",option4:"No correlation",question_type:"pediatric",correct_option:"High",source:"Midgard"},{id:"7179",question_text:"A 5-year-old child presents to Emergency Room with vomiting and diarrhea for 4 days. On examination, he looks dehydrated, hypoactive with sunken eyes and delayed skin turgor with dry mucous membrane and capillary refill is 4 seconds. The child connected to cardiopulmonary monitor and IV access attained, blood sample sent for electrolytes. Blood pressure 60/40 mmHg Heart rate 134 /min Respiratory rate 23 /min Temperature 36.6 Â°C Oxygen saturation 95 % Which of the following is the most appropriate next action?",option1:"Start inotropes",option2:"Give 5% albumin bolus",option3:"20 ml per kg normal saline bolus",option4:"Start maintenance fluid waiting for serum electrolytes",question_type:"pediatric",correct_option:"20 ml per kg normal saline bolus",source:"Midgard"},{id:"7180",question_text:"A 2-month-old infant found dead at his bed. According to the mother, he was feeding normally with usual activity. No history of fever or other abnormality. On examination, no sign of trauma or bruises on the skin. Baby gram was negative for fracture. Which of the following history's part is important to make the diagnosis?",option1:"Social history",option2:"Allergic history",option3:"Blood transfusion history",option4:"Maternal Medication history during pregnancy",question_type:"pediatric",correct_option:"Social history",source:"Midgard"},{id:"7181",question_text:"A 2-month-old infant found dead at his bed. According to the mother, he was feeding normally with usual activity. No history of fever or other abnormality. On examination, no sign of trauma or bruises on the skin. Baby gram was negative for fracture. Mother is divorced and known smoker. Which of the following is the most likely diagnosis?",option1:"Child abuse syndrome",option2:"Maternal smoking syndrome",option3:"Sudden infant death syndrome",option4:"Apparent life threatening events",question_type:"pediatric",correct_option:"Sudden infant death syndrome",source:"Midgard"},{id:"7182",question_text:"Which of the following measures would decrease the incidence of Sudden Infant Death Syndrome?",option1:"Pacifier at bedtime",option2:"Sleep in prone position",option3:"Soft sleeping mattress",option4:"Sleep position support device",question_type:"pediatric",correct_option:"Pacifier at bedtime",source:"Midgard"},{id:"7183",question_text:"A 3-month-old girl presented dead to the hospital by her parents. History revealed that the girl was preterm with low birth weight and chronic lung disease. She was sleeping with her parents on their bed and both parents are smoker. Which of the following describes her death?",option1:"Acute lung failure syndrome",option2:"Sudden infant death syndrome",option3:"Apparent life-threatening syndrome",option4:"Unexpected oxygen insufficiency syndrome",question_type:"pediatric",correct_option:"Sudden infant death syndrome",source:"Midgard"},{id:"7184",question_text:"Sudden infant death syndrome (SIDS) defined as unexpected death of an infant for which no adequate cause is found after postmortem examination. The incidence of SIDS has fallen during the last 20 years. Which of the following contribute the most for fallen in the incidence?",option1:"Infant to be put to sleep on their back",option2:"Parents avoid smoking near their infant",option3:"Infant to be placed in the feet to foot position",option4:"Avoid overheating by heavy wrapping or high room temperature",question_type:"pediatric",correct_option:"Infant to be put to sleep on their back",source:"Midgard"},{id:"7185",question_text:"A 6-month-old infant presents to the Emergency Room with sudden apnea and color change. The mother gave history of recurrent vomiting, and multiple chest infection. On examination, he looks failing to thrive with dystonic neck posturing while crying. Which of the following considers as high-risk case for the above disease?",option1:"Obese baby",option2:"Preterm infant",option3:"Post pertussis infection",option4:"Following inguinal hernia repair",question_type:"pediatric",correct_option:"Preterm infant",source:"Midgard"},{id:"2530",question_text:"A 4-month-old with Down syndrome, poor weight gain, tachypnea, systolic murmur, fixed split S2. ECG shows biventricular hypertrophy. Most likely diagnosis?",option1:"Coarctation",option2:"PDA",option3:"VSD",option4:"AV septal defect",question_type:"pediatric",correct_option:"AV septal defect",source:"general"},{id:"2531",question_text:"A 4-week-old baby presents with tachypnea, cyanosis during feeding, irritability. Most common associated symptom?",option1:"Cough",option2:"Ascites",option3:"Feeding difficulty",option4:"JVD",question_type:"pediatric",correct_option:"Feeding difficulty",source:"general"},{id:"2532",question_text:"A 6-month-old girl becomes cyanotic during feeding and crying. Harsh systolic murmur and single S2. Most likely diagnosis?",option1:"Aortic stenosis",option2:"Tetralogy of Fallot",option3:"VSD",option4:"TGA",question_type:"pediatric",correct_option:"Tetralogy of Fallot",source:"general"},{id:"2533",question_text:"A cyanotic newborn with tachypnea, normal pulses and no murmurs. CXR shows egg-on-string heart and pulmonary congestion. Diagnosis?",option1:"Tetralogy of Fallot",option2:"Coarctation",option3:"Transposition of great arteries",option4:"PDA",question_type:"pediatric",correct_option:"Transposition of great arteries",source:"general"},{id:"2534",question_text:"A 5-year-old child has loud pansystolic murmur at lower LLSB. Most likely diagnosis?",option1:"ASD",option2:"PDA",option3:"VSD",option4:"Pulmonary stenosis",question_type:"pediatric",correct_option:"VSD",source:"general"},{id:"2535",question_text:"ECG finding in ostium secundum ASD?",option1:"Delta waves",option2:"Left axis deviation",option3:"Right bundle branch block",option4:"Left ventricular hypertrophy",question_type:"pediatric",correct_option:"Right bundle branch block",source:"general"},{id:"2536",question_text:"Characteristic auscultatory finding in ASD?",option1:"S3 gallop",option2:"Fixed widely split S2",option3:"Continuous murmur",option4:"Systolic ejection click",question_type:"pediatric",correct_option:"Fixed widely split S2",source:"general"},{id:"2537",question_text:"A 3-year-old asymptomatic child has grade 2/6 continuous murmur at upper RSB that disappears when supine. Best action?",option1:"Reassurance",option2:"Cardiac consult",option3:"Antibiotic prophylaxis",option4:"Postpone surgery",question_type:"pediatric",correct_option:"Reassurance",source:"general"},{id:"2538",question_text:"Which finding in a newborn requires immediate intervention?",option1:"Erupted tooth",option2:"Breast enlargement",option3:"Shallow sacral dimple",option4:"Absent femoral pulses",question_type:"pediatric",correct_option:"Absent femoral pulses",source:"general"},{id:"2539",question_text:"A 13-year-old with family history of sudden cardiac death. Normal exam. Which condition must be ruled out?",option1:"Bicuspid aorta",option2:"PDA",option3:"VSD",option4:"HCM",question_type:"pediatric",correct_option:"HCM",source:"general"},{id:"1",question_text:"A patient received a severe blow on the inferolateral side of the left knee joint while playing football. Radiographic examination confirmed a fracture of the head and neck of the fibula. Which of the following nerves is most vulnerable for damage?",option1:"Tibial",option2:"Deep peroneal",option3:"Common peroneal",option4:"Superficial peroneal",question_type:"surgery",correct_option:"Common peroneal",source:"GameBoy"},{id:"2",question_text:"A 19-year-old fell on an outstretched hand while playing football. Examination confirmed tenderness over the anatomic snuff box. Which of the following is the most suspected fracture?",option1:"Colles",option2:"Cuboid",option3:"Scaphoid",option4:"Hook of hamate",question_type:"surgery",correct_option:"Scaphoid",source:"GameBoy"},{id:"3",question_text:"A 45-year-old man had transurethral catheterization before a long surgical procedure. Postoperatively he developed hematuria and a urethral injury is suspected. Which part of the urethra is most likely injured?",option1:"Penile",option2:"Prostatic",option3:"Membranous",option4:"Middle spongy",question_type:"surgery",correct_option:"Membranous",source:"GameBoy"},{id:"4",question_text:"A patient presented after a blunt injury over the left leg. Examination confirmed sensory loss on adjacent sides of the great and second toes, and impaired dorsiflexion of the foot. Which nerve is most likely injured?",option1:"Sural",option2:"Saphenous",option3:"Deep peroneal",option4:"Posterior tibial",question_type:"surgery",correct_option:"Deep peroneal",source:"GameBoy"},{id:"5",question_text:"A 61-year-old man presents to the Emergency Department with epigastric pain radiating to the back. He is a smoker with long-standing diabetes and hypertension. Abdominal exam reveals a pulsatile supra-umbilical mass. What is the most likely diagnosis?",option1:"Abdominal aortic aneurysm",option2:"Secondary liver metastasis",option3:"Renal cell carcinoma",option4:"Peri-umbilical hernia",question_type:"surgery",correct_option:"Abdominal aortic aneurysm",source:"GameBoy"},{id:"6",question_text:"A patent received a severe blow on the inferolateral side of the left knee joint while playing football. Radiographic examination confirmed a fracture of the head and neck of the fibula. Which of the following nerves is most vulnerable for damaged?",option1:"Tibial",option2:"Deep peroneal",option3:"Common peroneal",option4:"Superficial peroneal",question_type:"surgery",correct_option:"Common peroneal",source:"GameBoy"},{id:"7",question_text:"A 19-year-old felt on an outstretched hand while playing football. examination confirmed tenderness over the anatomic snuff box. Which of the following is the most suspected fracture?",option1:"Colles",option2:"Cuboi",option3:"Scaphoid",option4:"Hook of hamate",question_type:"surgery",correct_option:"Scaphoid",source:"GameBoy"},{id:"8",question_text:"A 45-year-old man had transurethral catheterization before going for a long surgical procedure. Postoperatively he developed haematuria and a urethral injury is suspected. Which of the following is most likely injured part of urethera?",option1:"Penile",option2:"Prostatic",option3:"Membranous",option4:"Middle spongy",question_type:"surgery",correct_option:"Membranous",source:"GameBoy"},{id:"9",question_text:"A patent presented after a blunt injury over the left leg. examination confirmed a sensory loss on adjacent sides of the great and second toes, and impaired dorsiflexion of the foot. Which of the following nerves is most likely injured?",option1:"Sural",option2:"Saphenous",option3:"Deep peroneal",option4:"Posterior tibial",question_type:"surgery",correct_option:"Deep peroneal",source:"GameBoy"},{id:"10",question_text:"A 60-year-old man presents to the Emergency Department with epigastric pain radiating to the back. He is a smoker and has long-standing diabetes and hypertension. Abdominal examination reveals a pulsatile supra-umbilical mass. Which of the following is the most likely diagnosis?",option1:"Abdominal aortic aneurysm",option2:"Secondary liver metastasis",option3:"Renal cell carcinoma",option4:"Peri-umbilical hernia",question_type:"surgery",correct_option:"Abdominal aortic aneurysm",source:"GameBoy"},{id:"8947",question_text:"A patient received a severe blow on the inferolateral side of the left knee joint while playing football. Radiographic examination confirmed a fracture of the head and neck of the fibula. Which of the following nerves is most vulnerable for damaged?",option1:"Tibial",option2:"Deep peroneal",option3:"Common peroneal",option4:"Superficial peroneal",question_type:"surgery",correct_option:"Common peroneal",source:"Midgard"},{id:"8948",question_text:"A 19-year-old fell on an outstretched hand while playing football. Examination confirmed tenderness over the anatomic snuff box. Which of the following is the most suspected fracture?",option1:"Colles",option2:"Cuboid",option3:"Scaphoid",option4:"Hook of hamate",question_type:"surgery",correct_option:"Scaphoid",source:"Midgard"},{id:"8949",question_text:"A 45-year-old man had transurethral catheterization before going for a long surgical procedure. Postoperatively he developed haematuria and a urethral injury is suspected. Which of the following is most likely injured part of urethra?",option1:"Penile",option2:"Prostatic",option3:"Membranous",option4:"Middle spongy",question_type:"surgery",correct_option:"Membranous",source:"Midgard"},{id:"8950",question_text:"A patient presented after a blunt injury over the left leg. Examination confirmed a sensory loss on adjacent sides of the great and second toes, and impaired dorsiflexion of the foot. Which of the following nerves is most likely injured?",option1:"Sural",option2:"Saphenous",option3:"Deep peroneal",option4:"Posterior tibial",question_type:"surgery",correct_option:"Deep peroneal",source:"Midgard"},{id:"8951",question_text:"A 60-year-old man presents to the Emergency Department with epigastric pain radiating to the back. He is a smoker and has long-standing diabetes and hypertension. Abdominal examination reveals a pulsatile supra-umbilical mass. Which of the following is the most likely diagnosis?",option1:"Abdominal aortic aneurysm",option2:"Secondary liver metastasis",option3:"Renal cell carcinoma",option4:"Peri-umbilical hernia",question_type:"surgery",correct_option:"Abdominal aortic aneurysm",source:"Midgard"},{id:"8952",question_text:"A 45-year-old man presented to the Emergency Department complaining of lower abdominal pain for 3 days. He gave a history of being hit by a piece of wood in the same site of pain 4 days back. Examination revealed lethargic patient in pain, which was aggravated by moving his leg. there was grayish turbid semipurulent secretions from a small break in the skin of right lower quadrant (see lab result). Test Result Normal Values WBC 33.1 4.5-10.5 x 109/L Which of the following is the most appropriate next step in the management?",option1:"Observation",option2:"Surgical drainage",option3:"CT scan abdomen",option4:"Culture and sensitivity for secretions",question_type:"surgery",correct_option:"Surgical drainage",source:"Midgard"},{id:"8953",question_text:"A 37-year-old man was involved in a fight and sustained a stab wound to the neck. On presentation, patient was conscious, alert. Examination showed a 2 cm wound anterior to the left ear and close to the angle of the mandible with blood ooze. which of the following is the most appropriate next step?",option1:"Chest X ray",option2:"Observation",option3:"CTA of the neck",option4:"Exploration of the wound",question_type:"surgery",correct_option:"CTA of the neck",source:"Midgard"},{id:"8954",question_text:"A 19-year-old woman brought to the Emergency Department after being stabbed to the right upper quadrant. On arrival, she was conscious and oriented. Examination showed only a penetrating wound to the anterior abdominal wall at anterior axillary line just below the right costal margin. Which of the following is the most appropriate next step?",option1:"Observation",option2:"CT scan abdomen",option3:"Ultrasound abdomen",option4:"Exploratory laparotomy",question_type:"surgery",correct_option:"CT scan abdomen",source:"Midgard"},{id:"8955",question_text:"A 25-year-old man brought to the Emergency Department after he was involved in motor vehicle crash, which was driving at a speed of 130 km/hour. Patient was wearing seat belt. On arrival to the Emergency Department, he was conscious, and alert (see report). Chest X-ray: Normal. Which of the following is the most appropriate next step?",option1:"US abdomen",option2:"CT scan abdomen",option3:"Diagnostic laparoscopy",option4:"Exploratory Laparotomy",question_type:"surgery",correct_option:"CT scan abdomen",source:"Midgard"},{id:"8956",question_text:"A 33-year-old man was involved in a motor vehicle crash. On arrival to the Emergency Department, he was conscious and alert. Examination showed an open wound to the anterior surface of the neck with devitalized tissue. Blood pressure 100/60 mmHg Heart rate 104 /min Respiratory rate 28 /min Oxygen saturation 87% Which of the following is the most appropriate next step?",option1:"Oxygen mask",option2:"Tracheostomy",option3:"Cricothyroidotomy",option4:"Endotracheal intubation",question_type:"surgery",correct_option:"Endotracheal intubation",source:"Midgard"},{id:"482",question_text:'An elderly man presents for follow-up after sustaining a road traffic accident 3 days ago. On examination, "Battle sign" is noted. Which of the following is the most likely cause?',option1:"Le Fort fracture",option2:"Mandibular fracture",option3:"Fracture base of skull",option4:"Fracture middle cranial fossa",question_type:"surgery",correct_option:"Fracture base of skull",source:"general"},{id:"483",question_text:"A 50-year-old man becomes disoriented on the 4th post-operative day after abdominal aortic aneurysm repair. BP = 90/40 mmHg, HR = 140/min, RR = 36/min, Temp = 36.6Â°C, warm peripheries, oliguria. What type of shock is most likely?",option1:"Septic",option2:"Cardiogenic",option3:"Hemorrhagic",option4:"Anaphylactic",question_type:"surgery",correct_option:"Septic",source:"general"},{id:"484",question_text:"A 20-year-old man hit by a car 2 hours ago has distended, tender abdomen. BP = 100/70 mmHg, HR = 120/min, RR = 30/min, Temp = 35Â°C, O2 sat = 90%. Most likely type of shock?",option1:"Spinal",option2:"Cardiogenic",option3:"Hemorrhagic",option4:"Anaphylactic",question_type:"surgery",correct_option:"Hemorrhagic",source:"general"},{id:"485",question_text:"A 30-year-old man hit by a truck 4 hours ago has raised JVP and muffled heart sounds. BP = 90/60 mmHg, HR = 140/min, RR = 32/min, O2 sat = 85%. Most likely type of shock?",option1:"Septic",option2:"Cardiogenic",option3:"Hemorrhagic",option4:"Anaphylactic",question_type:"surgery",correct_option:"Cardiogenic",source:"general"},{id:"486",question_text:"A 20-year-old patient complains of painless fresh rectal bleeding over the last 6 months. Most likely diagnosis?",option1:"Anal fissure",option2:"Hemorrhoids",option3:"Perianal fistula",option4:"Perianal abscess",question_type:"surgery",correct_option:"Hemorrhoids",source:"general"},{id:"487",question_text:"A 40-year-old diabetic presents with painful perianal swelling and fever for 3 days. Labs: WBC = 16 x10â¹/L, glucose = 6.5 mmol/L. Most likely diagnosis?",option1:"Anal fissure",option2:"Hemorrhoids",option3:"Perianal abscess",option4:"Thrombosed piles",question_type:"surgery",correct_option:"Perianal abscess",source:"general"},{id:"488",question_text:"A 50-year-old man developed large neck swelling with stridor and shortness of breath 5 hours post total thyroidectomy. Most appropriate next step?",option1:"Tracheostomy",option2:"Close observation",option3:"Percutaneous drainage",option4:"Bedside wound exploration",question_type:"surgery",correct_option:"Bedside wound exploration",source:"general"},{id:"489",question_text:"A 60-year-old man noticed swelling at laparoscopic hernia repair site 5 days post-op. Swelling not red or hot, mildly tender. Most likely diagnosis?",option1:"Seroma",option2:"Hematoma",option3:"Recurrence",option4:"Wound infection",question_type:"surgery",correct_option:"Seroma",source:"general"},{id:"490",question_text:"A 32-year-old man developed severe suprapubic pain and urinary retention 5 hours after hemorrhoidectomy. Most likely cause?",option1:"Dehydration",option2:"Urethral injury",option3:"Inadequate analgesia",option4:"Post-operative hematoma",question_type:"surgery",correct_option:"Inadequate analgesia",source:"general"},{id:"491",question_text:"A 52-year-old woman presents with rapid enlargement of a neck mass and weight loss. Long-standing Hashimoto's thyroiditis. Most likely diagnosis?",option1:"Hemorrhagic goiter",option2:"Thyroid lymphoma",option3:"Papillary carcinoma",option4:"Subacute thyroiditis",question_type:"surgery",correct_option:"Thyroid lymphoma",source:"general"}],Y=()=>{const{numQuestions:s}=n(),o=i(),r=a(),c=r.state?.id||"trial_user",l=r.state?.types,d=r.state?.source,[u]=e.useState(()=>{const e=(()=>{let e=V;if(l&&"mix"!==l){const t=l.split(",");e=e.filter(e=>t.includes(e.question_type))}return d&&(e=e.filter(e=>e.source===d)),e})(),t=parseInt(s)||10,i=Math.min(e.length,t);return e.slice(0,i)}),[p,h]=e.useState(0),[m,g]=e.useState(null),[y,x]=e.useState([]),[f,j]=e.useState(!1),[b,w]=e.useState(!0),[v]=e.useState(Date.now());e.useEffect(()=>{const e=document.createElement("script");return e.async=!0,e.src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9286976335875618",e.crossOrigin="anonymous",document.head.appendChild(e),()=>{const t=document.querySelector(`script[src="${e.src}"]`);t&&document.head.removeChild(t)}},[]),e.useEffect(()=>{const e=setTimeout(()=>w(!1),800);return()=>clearTimeout(e)},[]);return b?t.jsx(K,{}):f?t.jsx(X,{answers:y,navigate:o,id:c,quizStartTime:v,questions:u,selectedTypes:l,selectedSource:d}):t.jsx(J,{currentQuestion:u[p],currentIndex:p,totalQuestions:u.length,selectedAnswer:m,onSelectOption:e=>{g(e)},onSubmitAnswer:()=>{const e=u[p],t=m===e.correct_option;x(s=>[...s,{question:e.question_text,selected:m,correct:e.correct_option,isCorrect:t}]),g(null),p+1<u.length?h(p+1):j(!0)}})},J=({currentQuestion:e,currentIndex:s,totalQuestions:i,selectedAnswer:a,onSelectOption:n,onSubmitAnswer:o})=>t.jsxs("div",{className:"quiz-container",children:[t.jsxs("div",{className:"progress",children:["Question ",t.jsx("strong",{children:s+1})," of ",t.jsx("strong",{children:i})]}),t.jsx("h2",{className:"question-text",children:e.question_text}),t.jsx("div",{className:"options",children:["option1","option2","option3","option4"].map((s,i)=>t.jsx("button",{className:"option-button "+(a===e[s]?"selected":""),onClick:()=>n(e[s]),children:e[s]},i))}),t.jsx("div",{className:"submit-section",children:t.jsx("button",{className:"submit-button",onClick:o,disabled:!a,children:s+1<i?"Next Question":"Finish Quiz"})}),t.jsx(U,{})]}),K=()=>t.jsx("div",{className:"quiz-container",children:t.jsx("h2",{children:"Loading questions..."})}),X=({answers:e,navigate:s,id:i,quizStartTime:a,questions:n,selectedTypes:o,selectedSource:r})=>{const c=e.length,l=e.filter(e=>e.isCorrect).length,d=Math.floor((Date.now()-a)/1e3);return t.jsxs("div",{className:"quiz-result",children:[t.jsx("h2",{children:"Quiz Completed!"}),t.jsxs("p",{children:["You got ",t.jsx("strong",{children:l})," out of ",t.jsx("strong",{children:c})," correct."]}),t.jsxs("p",{children:["Accuracy: ",t.jsxs("strong",{children:[(l/c*100).toFixed(1),"%"]})]}),t.jsxs("p",{children:["Time taken: ",t.jsxs("strong",{children:[Math.floor(d/60),"m ",d%60,"s"]})]}),t.jsxs("div",{className:"trial-result-info",children:[t.jsxs("p",{children:["🎯 ",t.jsx("strong",{children:"Free Trial Complete!"})]}),t.jsxs("p",{children:["You've experienced ",c," sample questions from our collection."]}),o&&"mix"!==o&&t.jsxs("p",{children:["Topics covered: ",t.jsx("strong",{children:o.replace(/,/g,", ")})]}),r&&t.jsxs("p",{children:["Source: ",t.jsx("strong",{children:r})]})]}),t.jsxs("div",{className:"result-buttons",children:[t.jsx("button",{onClick:()=>{s("/payment")},className:"subscribe-button",children:"🚀 Subscribe Now - Full Access"}),t.jsx("button",{className:"contact-button",onClick:()=>{window.location.href="mailto:support@medquiz.com?subject=Free Trial Inquiry&body=Hi, I completed the free trial and would like to know more about the full version."},children:"📧 Contact Us"}),t.jsx("button",{className:"analysis-button",onClick:()=>s("/analysis-temp",{state:{id:i,answers:e,questions:n,duration:d,types:o,source:r}}),children:"📊 View Analysis"})]})]})},Z="BAAdvgbPBZdxM0-yidbc3OgdPJS92H4klQ5UqbnMhNCr-JO3zOU3NHDQNfFgHeJr-oQCQ1KJ4_am0ivFrA",ee="USD",te="capture",se=()=>({"client-id":Z,currency:ee,intent:te}),ie=({amount:s=1,description:i="Premium Access",onSuccess:a,onError:n})=>{const[o,r]=e.useState(!1),[c,l]=e.useState(null),d=se(),u=()=>{document.querySelectorAll("button").forEach(e=>{const t=(e.textContent||e.innerText||"").toLowerCase(),s=(e.getAttribute("aria-label")||"").toLowerCase(),i=(e.getAttribute("title")||"").toLowerCase();(t.includes("pay with paypal account")||t.includes("continue with paypal account")||s.includes("pay with paypal account")||i.includes("pay with paypal account"))&&(e.style.display="none",e.style.visibility="hidden",e.style.opacity="0"),(t.includes("credit card")||t.includes("debit card")||t.includes("card")||s.includes("credit card")||s.includes("debit card")||i.includes("credit card")||i.includes("debit card"))&&(e.style.display="block",e.style.visibility="visible",e.style.opacity="1",e.style.background="linear-gradient(135deg, #0070ba 0%, #005ea6 100%)",e.style.color="white",e.style.border="none",e.style.padding="16px 24px",e.style.borderRadius="8px",e.style.fontSize="16px",e.style.fontWeight="600",e.style.cursor="pointer",e.style.boxShadow="0 4px 15px rgba(0, 112, 186, 0.3)",e.style.textTransform="uppercase",e.style.letterSpacing="0.5px",e.style.margin="10px 0",e.style.width="100%")})};e.useEffect(()=>{u();const e=setInterval(u,500),t=new MutationObserver(()=>{u()});return t.observe(document.body,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","id","data-testid"]}),()=>{clearInterval(e),t.disconnect()}},[]),e.useEffect(()=>{let e;return o&&(e=setTimeout(()=>{r(!1),l("Payment is taking too long. Please try again.")},3e4)),()=>{e&&clearTimeout(e)}},[o]);return t.jsxs("div",{className:"credit-card-form-container",children:[c&&t.jsx("div",{className:"error-message",children:c}),t.jsxs("div",{className:"payment-info",children:[t.jsxs("h3",{children:["Pay 3.75 SAR (",i,")"]}),t.jsx("p",{children:"💳 Quick & Easy Payment Options"}),t.jsx("p",{children:t.jsx("small",{children:"Visa, Mastercard, American Express accepted"})}),t.jsx("p",{children:t.jsx("small",{children:"💳 Guest checkout - No PayPal account needed"})}),t.jsx("p",{children:t.jsx("small",{children:"⚡ Automatic payment methods enabled - Faster checkout"})}),t.jsx("p",{children:t.jsx("small",{children:"Amount: 3.75 SAR"})}),t.jsx("div",{className:"security-notice",children:t.jsx("p",{children:t.jsx("small",{children:"🔒 Secure payment processing - All transactions are encrypted"})})})]}),t.jsx(p,{options:d,onLoadStart:()=>{},onLoadSuccess:()=>{},onLoadError:e=>{l("Payment system is temporarily unavailable. Please try again later.")},children:t.jsx(h,{createOrder:(e,t)=>(r(!0),l(null),t.order.create({purchase_units:[{amount:{currency_code:"USD",value:s.toString()},description:i}],application_context:{shipping_preference:"NO_SHIPPING",user_action:"PAY_NOW",landing_page:"NO_PREFERENCE"}}).then(e=>(r(!1),e)).catch(e=>{throw l("Failed to create payment order. Please try again."),r(!1),e})),onApprove:(e,t)=>(r(!0),t.order.capture().then(e=>{r(!1),a&&a(e)}).catch(e=>{l("Payment failed. Please try again."),r(!1)})),onError:e=>{l("Payment error occurred. Please try again."),r(!1),n&&n(e)},onCancel:e=>{r(!1)},style:{layout:"vertical",color:"blue",shape:"rect",label:"pay",height:55,tagline:!1},disabled:o})}),o&&t.jsxs("div",{className:"loading-overlay",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Processing payment..."}),t.jsx("button",{onClick:()=>{r(!1),l("Payment cancelled by user.")},className:"cancel-button",children:"Cancel Payment"})]})]})},ae=()=>{const s="ar"===y(),a=i(),[n,o]=e.useState("special"),[r,c]=e.useState(!1);return t.jsxs("div",{className:"payment-page",children:[t.jsxs("div",{className:"payment-header",children:[t.jsx("button",{onClick:()=>{a("/")},className:"back-button",children:s?"← العودة":"← Back"}),t.jsx("h1",{children:s?"اشتراك سنوي - سنة كاملة":"Annual Subscription - Full Year"}),t.jsx("p",{className:"payment-subtitle",children:s?"احصل على الوصول الكامل إلى أكثر من 8000 سؤال مع تحليلات مفصلة":"Get full access to 8000+ questions with detailed analytics"})]}),t.jsx("div",{className:"single-plan-container",children:t.jsxs("div",{className:"plan-highlight",children:[t.jsx("div",{className:"popular-badge",children:s?" عرض محدود ":" Limited Offer "}),t.jsxs("div",{className:"plan-pricing",children:[t.jsxs("div",{className:"price-display",children:[t.jsx("span",{className:"current-price",children:"3.75 SAR"}),t.jsx("span",{className:"original-price",children:"250 SAR"})]}),t.jsx("div",{className:"savings-badge",children:s?"توفير 80%":"Save 80%"}),t.jsx("div",{className:"period-text",children:s?"لمدة سنة كاملة":"FOR 1 FULL YEAR"})]}),t.jsxs("div",{className:"plan-features",children:[t.jsxs("div",{className:"feature-item",children:[t.jsx("span",{className:"feature-icon",children:"✓"}),t.jsx("span",{children:s?"الوصول إلى جميع الأسئلة":"Access to all questions"})]}),t.jsxs("div",{className:"feature-item",children:[t.jsx("span",{className:"feature-icon",children:"✓"}),t.jsx("span",{children:s?"تحليلات مفصلة":"Detailed analytics"})]}),t.jsxs("div",{className:"feature-item",children:[t.jsx("span",{className:"feature-icon",children:"✓"}),t.jsx("span",{children:s?"تتبع التقدم":"Progress tracking"})]}),t.jsxs("div",{className:"feature-item",children:[t.jsx("span",{className:"feature-icon",children:"✓"}),t.jsx("span",{children:s?"دعم فني":"Technical support"})]})]}),t.jsxs("div",{className:"payment-actions",children:[t.jsx(ie,{amount:1,description:s?"اشتراك سنوي - سنة كاملة":"Full Year",onSuccess:async e=>{const t=`paid_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;try{if(!(await fetch(`${g}/api/payment/create-user`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t,paymentDetails:e})})).ok)throw new Error("Failed to create user record");localStorage.setItem("paidUserId",t),a("/signup",{state:{paymentConfirmed:!0,userId:t,paymentDetails:e,amount:1,currency:"USD"}})}catch(s){localStorage.setItem("paidUserId",t),a("/signup",{state:{paymentConfirmed:!0,userId:t,paymentDetails:e,amount:1,currency:"USD",error:"Payment successful but account setup failed. Please contact support."}})}},onError:e=>{}}),t.jsx("button",{onClick:()=>{window.open("https://wa.link/pzhg6j","_blank")},className:"contact-button",children:s?"تواصل معنا":"Contact Us"})]})]})}),t.jsxs("div",{className:"payment-features",children:[t.jsx("h3",{children:s?"ماذا تحصل عليه:":"What You Get:"}),t.jsxs("div",{className:"features-grid",children:[t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"📚"}),t.jsx("h4",{children:s?"8000+ سؤال":"8000+ Questions"}),t.jsx("p",{children:s?"بنك أسئلة شامل لاختبار البرومترك":"Comprehensive question bank for Prometric exam"})]}),t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"📊"}),t.jsx("h4",{children:s?"تحليلات مفصلة":"Detailed Analytics"}),t.jsx("p",{children:s?"تتبع أدائك وتحديد نقاط الضعف":"Track your performance and identify weak areas"})]}),t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"🎯"}),t.jsx("h4",{children:s?"تدريب مستهدف":"Targeted Practice"}),t.jsx("p",{children:s?"ركز على المواضيع التي تحتاج تحسين":"Focus on topics that need improvement"})]}),t.jsxs("div",{className:"feature-card",children:[t.jsx("div",{className:"feature-icon",children:"📱"}),t.jsx("h4",{children:s?"متوفر على جميع الأجهزة":"Available on All Devices"}),t.jsx("p",{children:s?"ادرس من أي مكان وفي أي وقت":"Study anywhere, anytime"})]})]})]}),t.jsx("div",{className:"payment-guarantee",children:t.jsxs("div",{className:"guarantee-content",children:[t.jsx("div",{className:"guarantee-icon",children:"🛡️"}),t.jsxs("div",{className:"guarantee-text",children:[t.jsx("h4",{children:s?"ضمان استرداد الأموال":"Money-Back Guarantee"}),t.jsx("p",{children:s?"إذا لم تكن راضياً، سنعيد لك أموالك خلال 30 يوماً":"If you're not satisfied, we'll refund your money within 30 days"})]})]})})]})},ne=()=>{const a=i();return e.useEffect(()=>{(async()=>{try{const e=await s.post(`${g}/api/payment/create-user`);if(e.data.success){const t=e.data.userId;await s.post(`${g}/api/payment/confirm`,{userId:t}),a("/signup",{state:{userId:t,paymentConfirmed:!0,fromKoFi:!0}})}}catch(e){a("/payment")}})()},[a]),t.jsxs(t.Fragment,{children:[t.jsx("style",{children:"\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n"}),t.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",background:"#f8fafc"},children:t.jsxs("div",{style:{textAlign:"center"},children:[t.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #667eea",borderRadius:"50%",animation:"spin 0.5s linear infinite",margin:"0 auto 20px"}}),t.jsx("h2",{children:"Setting up your account..."}),t.jsx("p",{children:"Redirecting to signup..."})]})})]})},oe=({amount:s=1,description:i="Premium Access",onSuccess:a,onError:n})=>{const[o,r]=e.useState(!1),[c,l]=e.useState(null),d=se();return t.jsxs("div",{className:"paypal-button-container",children:[c&&t.jsx("div",{className:"error-message",children:c}),t.jsxs("div",{className:"payment-info",children:[t.jsxs("h3",{children:["Pay ",s," SAR (",i,")"]}),t.jsx("p",{children:"Secure payment with credit card"}),t.jsx("p",{children:t.jsx("small",{children:"Visa, Mastercard, American Express accepted"})})]}),t.jsx(p,{options:d,children:t.jsx(h,{createOrder:(e,t)=>{return r(!0),l(null),t.order.create({purchase_units:[{amount:{currency_code:"USD",value:(a=s,a.toFixed(2))},description:i}],application_context:{shipping_preference:"NO_SHIPPING"}});var a},onApprove:(e,t)=>t.order.capture().then(e=>{r(!1),a&&a(e)}).catch(e=>{l("Payment failed. Please try again."),r(!1)}),onError:e=>{l("Payment error occurred. Please try again."),r(!1),n&&n(e)},onCancel:e=>{r(!1)},style:{layout:"vertical",color:"black",shape:"rect",label:"pay",height:50},disabled:o})}),o&&t.jsxs("div",{className:"loading-overlay",children:[t.jsx("div",{className:"spinner"}),t.jsx("p",{children:"Processing payment..."})]})]})},re=()=>{const s=i(),[a,n]=e.useState([]),o=(e,t,s)=>{n(i=>[...i,{test:e,status:t,details:s,timestamp:(new Date).toLocaleTimeString()}])};return t.jsxs("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto"},children:[t.jsx("h1",{children:"Payment Flow Test"}),t.jsx("div",{style:{marginBottom:"20px"},children:t.jsx("button",{onClick:()=>{o("Payment Button Render","PASS","PayPal button component loaded successfully")},style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"Run Payment Tests"})}),t.jsxs("div",{style:{marginBottom:"30px"},children:[t.jsx("h2",{children:"Test PayPal Payment (50 SAR)"}),t.jsx(oe,{amount:50,description:"Test Payment",onSuccess:e=>{o("Payment Success","PASS",`Payment completed: ${e.id}`);const t=`test_paid_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;o("Redirect to Signup","PASS",`Redirecting to signup with userId: ${t}`),s("/signup",{state:{paymentConfirmed:!0,userId:t,paymentDetails:e,amount:50,currency:"SAR",isTest:!0}})},onError:e=>{o("Payment Error","FAIL",`Payment failed: ${e.message||e}`)}})]}),t.jsxs("div",{children:[t.jsx("h2",{children:"Test Results"}),0===a.length?t.jsx("p",{children:'No tests run yet. Click "Run Payment Tests" to start.'}):t.jsx("div",{children:a.map((e,s)=>t.jsxs("div",{style:{padding:"10px",margin:"5px 0",border:"1px solid #ddd",borderRadius:"5px",backgroundColor:"PASS"===e.status?"#d4edda":"#f8d7da"},children:[t.jsx("strong",{children:e.test})," -",t.jsx("span",{style:{color:"PASS"===e.status?"green":"red"},children:e.status}),t.jsx("br",{}),t.jsx("small",{children:e.details}),t.jsx("br",{}),t.jsx("small",{style:{color:"#666"},children:e.timestamp})]},s))})]}),t.jsxs("div",{style:{marginTop:"30px"},children:[t.jsx("h3",{children:"Expected Flow:"}),t.jsxs("ol",{children:[t.jsx("li",{children:"✅ Payment button renders correctly"}),t.jsx("li",{children:"✅ User clicks PayPal button"}),t.jsx("li",{children:"✅ PayPal payment modal opens"}),t.jsx("li",{children:"✅ User completes payment (test mode)"}),t.jsx("li",{children:"✅ Payment success callback triggered"}),t.jsx("li",{children:"✅ User redirected to /signup with payment data"}),t.jsx("li",{children:"✅ Signup page receives payment confirmation"}),t.jsx("li",{children:"✅ User can create account"})]})]})]})},ce=()=>{const s=i(),[a,n]=e.useState([]),[o,r]=e.useState(""),c=(e,t,s,i=null)=>{const a={test:e,status:t,details:s,error:i,timestamp:(new Date).toLocaleTimeString()};n(e=>[...e,a])},l=async()=>{n([]),r("Testing component loading..."),c("Component Loading","PASS","PaymentFlowTest component loaded successfully"),r("Testing PayPal button render..."),c("PayPal Button Render","PASS","PayPal button component should render"),r("Testing navigation setup..."),c("Navigation Setup","PASS","React Router navigation is configured"),r("Testing payment success flow..."),c("Payment Success Flow","READY","Ready to test payment success callback"),r("All tests completed. Ready for payment test.")},d=e=>{c("Payment Success","PASS",`Payment completed successfully: ${e.id}`);const t=`test_paid_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;c("Redirect to Signup","PASS",`Redirecting to signup with userId: ${t}`),localStorage.setItem("testPaymentData",JSON.stringify({userId:t,paymentDetails:e,amount:50,currency:"SAR",timestamp:(new Date).toISOString()})),s("/signup",{state:{paymentConfirmed:!0,userId:t,paymentDetails:e,amount:50,currency:"SAR",isTest:!0}})};return e.useEffect(()=>{l()},[]),t.jsxs("div",{style:{padding:"20px",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[t.jsx("h1",{children:"🧪 Payment Flow Test Suite"}),t.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px",border:"1px solid #dee2e6"},children:[t.jsxs("h3",{children:["Current Test: ",o]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Status:"})," ",a.length>0?"Tests Running":"Ready to Start"]})]}),t.jsxs("div",{style:{marginBottom:"20px"},children:[t.jsx("button",{onClick:l,style:{padding:"10px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginRight:"10px"},children:"🔄 Run All Tests"}),t.jsx("button",{onClick:()=>{d({id:"test_payment_123",status:"COMPLETED",amount:{currency_code:"SAR",value:"50.00"}})},style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",marginRight:"10px"},children:"🚀 Test Signup Redirect"}),t.jsx("button",{onClick:()=>{localStorage.removeItem("testPaymentData"),localStorage.removeItem("paidUserId"),n([]),c("Test Data Cleared","PASS","All test data cleared from localStorage")},style:{padding:"10px 20px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"5px",cursor:"pointer"},children:"🗑️ Clear Test Data"})]}),t.jsxs("div",{style:{marginBottom:"30px"},children:[t.jsx("h2",{children:"💳 Test PayPal Payment (50 SAR)"}),t.jsx("div",{style:{border:"2px solid #007bff",padding:"20px",borderRadius:"10px",backgroundColor:"white"},children:t.jsx(oe,{amount:50,description:"Test Payment - 50 SAR",onSuccess:d,onError:e=>{c("Payment Error","FAIL",`Payment failed: ${e.message||e}`,e)}})})]}),t.jsxs("div",{children:[t.jsxs("h2",{children:["📊 Test Results (",a.length,")"]}),0===a.length?t.jsx("p",{children:'No tests run yet. Click "Run All Tests" to start.'}):t.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:a.map((e,s)=>t.jsxs("div",{style:{padding:"12px",margin:"8px 0",border:"1px solid #ddd",borderRadius:"8px",backgroundColor:"PASS"===e.status?"#d4edda":"FAIL"===e.status?"#f8d7da":"#fff3cd"},children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t.jsx("strong",{children:e.test}),t.jsx("span",{style:{color:"PASS"===e.status?"green":"FAIL"===e.status?"red":"orange",fontWeight:"bold"},children:e.status})]}),t.jsx("div",{style:{marginTop:"5px"},children:t.jsx("small",{children:e.details})}),e.error&&t.jsx("div",{style:{marginTop:"5px"},children:t.jsxs("small",{style:{color:"red"},children:["Error: ",e.error.toString()]})}),t.jsx("div",{style:{marginTop:"5px"},children:t.jsxs("small",{style:{color:"#666"},children:["⏰ ",e.timestamp]})})]},s))})]}),t.jsxs("div",{style:{marginTop:"30px",backgroundColor:"#e9ecef",padding:"20px",borderRadius:"8px"},children:[t.jsx("h3",{children:"📋 Expected Payment Flow:"}),t.jsxs("ol",{children:[t.jsx("li",{children:"✅ User visits payment page"}),t.jsx("li",{children:"✅ PayPal button renders with 50 SAR"}),t.jsx("li",{children:"✅ User clicks PayPal button"}),t.jsx("li",{children:"✅ PayPal payment modal opens"}),t.jsx("li",{children:"✅ User completes payment (test/sandbox mode)"}),t.jsx("li",{children:"✅ Payment success callback triggered"}),t.jsx("li",{children:"✅ User ID generated and stored"}),t.jsx("li",{children:"✅ User redirected to /signup with payment data"}),t.jsx("li",{children:"✅ Signup page receives payment confirmation"}),t.jsx("li",{children:"✅ User can create account with payment verification"})]})]}),t.jsxs("div",{style:{marginTop:"20px",backgroundColor:"#d1ecf1",padding:"15px",borderRadius:"8px"},children:[t.jsx("h4",{children:"🔍 Debug Information:"}),t.jsxs("p",{children:[t.jsx("strong",{children:"PayPal Environment:"})," Sandbox (for testing)"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Currency:"})," SAR (Saudi Riyal)"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Amount:"})," 50 SAR"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Redirect URL:"})," /signup"]}),t.jsxs("p",{children:[t.jsx("strong",{children:"Test Data Storage:"})," localStorage"]})]})]})},le=()=>{const[n,o]=e.useState({username:"",password:"",confirmPassword:""}),[r,c]=e.useState(!1),[l,d]=e.useState(""),[u,p]=e.useState(!1),h=i(),m=a();e.useEffect(()=>{const{userId:e,paymentConfirmed:t,fromKoFi:s,isTest:i}=m.state||{};t&&e?localStorage.setItem("paidUserId",e):h("/payment")},[m.state,h]);const y=e=>{const{name:t,value:s}=e.target;o(e=>({...e,[t]:s}))};return u?t.jsx("div",{className:"signup-container",children:t.jsxs("div",{className:"signup-card success",children:[t.jsx("div",{className:"success-icon",children:"✅"}),t.jsx("h2",{children:"Account Created Successfully!"}),t.jsx("p",{children:"Your account has been created. Redirecting to login..."})]})}):t.jsx("div",{className:"signup-container",children:t.jsxs("div",{className:"signup-card",children:[t.jsx("h2",{children:"Create Your Account"}),t.jsx("p",{className:"signup-subtitle",children:"Complete your account setup after payment"}),t.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),d(""),c(!0),n.username&&n.password&&n.confirmPassword?n.password!==n.confirmPassword?(d("Passwords do not match"),!0):n.password.length<6&&(d("Password must be at least 6 characters long"),1):(d("All fields are required"),!0))c(!1);else try{const e=localStorage.getItem("paidUserId");if(!e)throw new Error("Payment verification not found. Please complete payment first.");const t=await s.post(`${g}/api/payment/create-account`,{userId:e,username:n.username,password:n.password});if(!t.data.success)throw new Error(t.data.message||"Failed to create account");p(!0),localStorage.removeItem("paidUserId"),setTimeout(()=>{h("/login",{state:{message:"Account created successfully! Please log in.",username:n.username}})},2e3)}catch(t){d(t.response?.data?.message||t.message||"Failed to create account")}finally{c(!1)}},className:"signup-form",children:[t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"username",children:"Username"}),t.jsx("input",{type:"text",id:"username",name:"username",value:n.username,onChange:y,placeholder:"Choose a username",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"password",children:"Password"}),t.jsx("input",{type:"password",id:"password",name:"password",value:n.password,onChange:y,placeholder:"Create a password",required:!0})]}),t.jsxs("div",{className:"form-group",children:[t.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),t.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:n.confirmPassword,onChange:y,placeholder:"Confirm your password",required:!0})]}),u&&t.jsxs("div",{className:"success-message",children:[t.jsx("h3",{children:"✅ Account Created Successfully!"}),t.jsx("p",{children:"Your account has been created. Redirecting to login page..."})]}),l&&t.jsx("div",{className:"error-message",children:l}),t.jsx("button",{type:"submit",className:"signup-button",disabled:r,children:r?t.jsxs("div",{className:"loading-spinner",children:[t.jsx("div",{className:"spinner"}),"Creating Account..."]}):"Create Account"}),t.jsxs("div",{className:"contact-support",children:[t.jsx("p",{children:"Having trouble creating your account?"}),t.jsx("button",{className:"contact-button",onClick:()=>window.open("https://wa.link/pzhg6j","_blank"),children:"Contact Support"})]})]})]})})},de=()=>{const e=o(),s=i();return t.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",padding:"20px",textAlign:"center",background:"#f8fafc"},children:[t.jsx("h1",{style:{color:"#dc2626",marginBottom:"20px"},children:"Oops! Something went wrong"}),t.jsx("p",{style:{color:"#6b7280",marginBottom:"30px"},children:404===e?.status?"The page you are looking for does not exist.":"An unexpected error occurred. Please try again."}),t.jsxs("div",{style:{display:"flex",gap:"15px"},children:[t.jsx("button",{onClick:()=>s("/"),style:{padding:"12px 24px",background:"#2563eb",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"Go Home"}),t.jsx("button",{onClick:()=>s(-1),style:{padding:"12px 24px",background:"#6b7280",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"16px"},children:"Go Back"})]})]})},ue=g,pe=r([{path:"/",element:t.jsx(w,{}),errorElement:t.jsx(de,{})},{path:"/login",element:t.jsx(v,{}),errorElement:t.jsx(de,{})},{path:"/ADD_ACCOUNT",element:t.jsx(q,{host:ue}),errorElement:t.jsx(de,{})},{path:"/quizs",element:t.jsx(C,{}),errorElement:t.jsx(de,{})},{path:"/temp-quiz/:numQuestions",element:t.jsx(Y,{}),errorElement:t.jsx(de,{})},{path:"/quiz/:numQuestions",element:t.jsx(z,{}),errorElement:t.jsx(de,{})},{path:"/ADDQ",element:t.jsx(L,{host:g}),errorElement:t.jsx(de,{})},{path:"/analysis",element:t.jsx(W,{}),errorElement:t.jsx(de,{})},{path:"/wrong-questions",element:t.jsx(H,{}),errorElement:t.jsx(de,{})},{path:"/analysis-temp",element:t.jsx(G,{}),errorElement:t.jsx(de,{})},{path:"/admin",element:t.jsx($,{}),errorElement:t.jsx(de,{})},{path:"/Bank",element:t.jsx(Q,{}),errorElement:t.jsx(de,{})},{path:"/payment",element:t.jsx(ae,{}),errorElement:t.jsx(de,{})},{path:"/waiting-for-payment",element:t.jsx(ne,{}),errorElement:t.jsx(de,{})},{path:"/payment-test",element:t.jsx(re,{}),errorElement:t.jsx(de,{})},{path:"/payment-flow-test",element:t.jsx(ce,{}),errorElement:t.jsx(de,{})},{path:"/signup",element:t.jsx(le,{}),errorElement:t.jsx(de,{})},{path:"*",element:t.jsx(de,{})}]);u.createRoot(document.getElementById("root")).render(t.jsx(e.StrictMode,{children:t.jsx(j,{children:t.jsx(c,{router:pe})})}));
